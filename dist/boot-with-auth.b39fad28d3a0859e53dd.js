(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1266:function(e,t,n){"use strict";n.r(t),n.d(t,"bootWithToken",(function(){return ic}));var r=n(0),o=n.n(r),a=n(487),i=(n(800),n(647)),c=n(33),u=n(21),l=n.n(u),s=n(801),f=n.n(s);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){var t=e.text,n=Object(r.useRef)(),a=Object(r.useRef)(),i=Object(r.useRef)(),c=function(){s(!0)},u=d(Object(r.useState)(!1),2),l=u[0],s=u[1];return Object(r.useEffect)((function(){if(l){var e=setTimeout((function(){return s(!1)}),4e3);return function(){return clearTimeout(e)}}}),[l]),Object(r.useEffect)((function(){a.current=function(){return t},i.current=c}),[t,c]),Object(r.useEffect)((function(){var e=new f.a(n.current,{text:function(){return a.current()}});return e.on("success",(function(){return i.current()})),function(){return e.destroy()}}),[]),o.a.createElement("button",{ref:n,type:"button",className:"button button-borderless"},l?"Copied!":"Copy")}m.propTypes={disbaled:l.a.bool,text:l.a.string};var y=m,h=Object(a.b)((function(e,t){var n=t.noteId;return{lastUpdated:e.simperium.lastSync.get(n)}}))((function(e){var t=e.lastUpdated;return void 0!==t?o.a.createElement("time",{dateTime:new Date(t).toISOString()},new Date(t).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})):o.a.createElement("span",null)})),v=n(537);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var E=function(e){var t=e.className,n=e.onChange,r=b(e,["className","onChange"]);return o.a.createElement("span",{className:"toggle-control ".concat(t)},o.a.createElement("input",g({type:"checkbox",onChange:function(e){var t=e.currentTarget.checked;return n(t)}},r)),o.a.createElement("span",{className:"toggle-control-layers"},o.a.createElement("span",{className:"toggle-control-unchecked-color"}),o.a.createElement("span",{className:"toggle-control-checked-color"}),o.a.createElement("span",{className:"toggle-control-knob"})))},O=n(93),w=n(572);function T(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=function(e){return"simplenote://note/".concat(e)},_=function(e){var t=new Set;if(!e.ui.openedNote)return[];var n=N(e.ui.openedNote);return e.data.notes.forEach((function(e,r){e.content.includes(n)&&t.add(r)})),T(t.values())},A=function(e,t){var n,r=e.data.notes.get(t);if(r&&e.ui.openedNote){var o=new RegExp(N(e.ui.openedNote),"gi"),a=(null==r||null===(n=r.content.match(o))||void 0===n?void 0:n.length)||0,i=Object(w.a)(r).title;return{count:a,noteId:t,modificationDate:null==r?void 0:r.modificationDate,title:i}}},j=n(500),I=Object(a.b)((function(e,t){var n=t.noteId;return{reference:A(e,n)}}),(function(e,t){var n=t.noteId;return{openNote:function(){return e(j.a.ui.selectNote(n))}}}))((function(e){var t=e.openNote,n=e.reference;return n?o.a.createElement("button",{className:"reference-link",onClick:t},o.a.createElement("span",{className:"reference-title note-info-name"},n.title),o.a.createElement("span",null,n.count," Reference",n.count>1?"s":"",n.modificationDate&&", last modified ",n.modificationDate&&o.a.createElement("time",{dateTime:new Date(1e3*n.modificationDate).toISOString()},new Date(1e3*n.modificationDate).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric"})))):null})),R=Object(a.b)((function(e){return{references:_(e)}}))((function(e){var t=e.references;return t.length?o.a.createElement("div",{className:"note-info-panel note-info-internal-link theme-color-border"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"References"),t.map((function(e){return o.a.createElement(I,{noteId:e,key:e})})))):null}));function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var o=G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(i,e);var t,n,r,a=P(i);function i(){var e;D(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return H(x(e=a.call.apply(a,[this].concat(n))),"handleClickOutside",e.props.onOutsideClick),H(x(e),"getNoteLink",(function(e,t){var n=Object(w.a)(e).title;return"[".concat(n,"](simplenote://note/").concat(t,")")})),H(x(e),"getPublishURL",(function(e){return Object(c.isEmpty)(e)?null:"http://simp.ly/p/".concat(e)})),H(x(e),"pinNote",(function(t){return e.props.pinNote(e.props.noteId,t)})),H(x(e),"markdownNote",(function(t){return e.props.markdownNote(e.props.noteId,t)})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.isMarkdown,n=e.isPinned,r=e.noteId,a=e.note,i=Object(c.includes)(a.systemTags,"published"),u=a.modificationDate?1e3*a.modificationDate:null,l=this.getPublishURL(a.publishURL),s=this.getNoteLink(a,r);return o.a.createElement("div",{className:"note-info theme-color-bg theme-color-fg theme-color-border"},o.a.createElement("div",{className:"note-info-panel note-info-stats theme-color-border"},o.a.createElement("div",{className:"note-info-header"},o.a.createElement(v.a,{headingLevel:2},"Info"),o.a.createElement("button",{type:"button",className:"about-done button button-borderless",onClick:this.handleClickOutside},o.a.createElement(O.a,null))),u&&o.a.createElement("p",{className:"note-info-item"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Modified"),o.a.createElement("br",null),o.a.createElement("span",{className:"note-info-detail"},o.a.createElement("time",{dateTime:new Date(u).toISOString()},new Date(u).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}))))),o.a.createElement("p",{className:"note-info-item"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Last sync"),o.a.createElement("br",null),o.a.createElement("span",{className:"note-info-detail"},o.a.createElement(h,{noteId:r})))),o.a.createElement("p",{className:"note-info-item"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},((a.content||"").replace(/[\u200B]+/,"").trim().replace(/['";:,.?¿\-!¡]+/g,"").match(/\S+/g)||[]).length," words"))),o.a.createElement("p",{className:"note-info-item"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},function(e){return(e||"").replace(B,"_").length}(a.content)," characters")))),o.a.createElement("div",{className:"note-info-panel note-info-pin theme-color-border"},o.a.createElement("label",{className:"note-info-item",htmlFor:"note-info-pin-checkbox"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Pin to top")),o.a.createElement("span",{className:"note-info-item-control"},o.a.createElement(E,{id:"note-info-pin-checkbox",checked:n,onChange:this.pinNote})))),o.a.createElement("div",{className:"note-info-panel note-info-markdown theme-color-border"},o.a.createElement("label",{className:"note-info-item",htmlFor:"note-info-markdown-checkbox"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Markdown"),o.a.createElement("br",null),o.a.createElement("span",{className:"note-info-detail"},"Enable markdown formatting on this note."," ",o.a.createElement("a",{target:"_blank",href:"http://simplenote.com/help/#markdown",rel:"noopener noreferrer"},"Learn more…"))),o.a.createElement("span",{className:"note-info-item-control"},o.a.createElement(E,{id:"note-info-markdown-checkbox",checked:t,onChange:this.markdownNote})))),i&&o.a.createElement("div",{className:"note-info-panel note-info-public-link theme-color-border"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Public link"),o.a.createElement("div",{className:"note-info-copy"},o.a.createElement("p",{className:"note-info-detail note-info-link-text"},l),o.a.createElement(y,{text:l})))),o.a.createElement("div",{className:"note-info-panel note-info-internal-link theme-color-border"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Internal link"),o.a.createElement("div",{className:"note-info-copy"},o.a.createElement("p",{className:"note-info-detail note-info-link-text"},"simplenote://note/".concat(r)),o.a.createElement(y,{text:s})))),o.a.createElement(R,null))}}])&&k(t.prototype,n),r&&k(t,r),i}(r.Component);H(U,"displayName","NoteInfo");var B=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var V={markdownNote:j.a.data.markdownNote,onOutsideClick:j.a.ui.toggleNoteInfo,pinNote:j.a.data.pinNote},F=Object(a.b)((function(e){var t=e.data,n=e.ui.openedNote,r=t.notes.get(n);return{noteId:n,note:r,isMarkdown:null==r?void 0:r.systemTags.includes("markdown"),isPinned:null==r?void 0:r.systemTags.includes("pinned")}}),V)(Object(i.a)(U)),z=n(1268);function W(){return o.a.createElement("svg",{className:"icon-connection",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"0 0 24 24"},o.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M12,15c1.1,0,2.09,0.44,2.81,1.16L12,18.97l-2.81-2.81C9.91,15.44,10.9,15,12,15z M2.12,9.09l1.41,1.41 C5.7,8.34,8.69,7,12,7s6.3,1.34,8.47,3.5l1.41-1.41C19.35,6.56,15.86,5,12,5S4.65,6.56,2.12,9.09z M5.65,12.62l1.41,1.41 C8.33,12.78,10.07,12,12,12s3.67,0.78,4.93,2.04l1.41-1.41C16.72,11,14.48,10,12,10S7.28,11,5.65,12.62z"})))}function K(){return o.a.createElement("svg",{className:"icon-no-connection",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"0 0 24 24"},o.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M10.88,7.06L9.13,5.3C10.05,5.1,11.01,5,12,5c3.86,0,7.35,1.56,9.88,4.09l-1.41,1.41C18.3,8.34,15.31,7,12,7 C11.62,7,11.25,7.02,10.88,7.06z M18.35,12.62c-1.16-1.15-2.63-1.98-4.27-2.37l3.32,3.32L18.35,12.62z M11.05,10.05L8.52,7.52 L6.95,5.95L3.51,2.51L2.1,3.93l2.95,2.95C3.98,7.49,2.98,8.22,2.12,9.09l1.41,1.41C4.4,9.63,5.42,8.92,6.52,8.35l2.25,2.25 c-1.18,0.45-2.24,1.15-3.12,2.02l1.41,1.41c0.9-0.89,2.03-1.53,3.3-1.84l3.08,3.08C13,15.11,12.51,15,12,15 c-1.1,0-2.09,0.44-2.81,1.16L12,18.97l2.57-2.57l4.5,4.5l1.41-1.41l-7.39-7.39L11.05,10.05z"})))}n(803);var Y=Object(a.b)((function(e){return{connectionStatus:e.simperium.connectionStatus}}))((function(e){var t=e.connectionStatus;return o.a.createElement("div",{className:"navigation-bar__footer-item theme-color-fg-dim"},o.a.createElement(z.a,{enterDelay:200,classes:{tooltip:"icon-button__tooltip"},title:"green"===t?"Simplenote is communicating with the server.":"offline"===t?"Simplenote is operating in offline mode and changes won't be synchronized with the server until it connects again.":"Simplenote hasn't communicated with the server in a while; changes may not be synchronized with the server until the connection improves."},o.a.createElement("p",null,"green"===t?o.a.createElement(W,null):o.a.createElement(K,null),o.a.createElement("span",{className:"server-connection__label"},"Server connection"))))})),Q=n(37),$=n.n(Q),q=function(e){var t=e.icon,n=e.isSelected,r=void 0!==n&&n,a=e.label,i=e.onClick,c=$()("navigation-bar-item",{"is-selected":r}),u=$()("button","button-borderless","theme-color-fg");return o.a.createElement("div",{className:c},o.a.createElement("button",{type:"button",className:u,onClick:i},o.a.createElement("span",{className:"navigation-bar-item__icon"},t),a))};q.propTypes={icon:l.a.element.isRequired,isSelected:l.a.bool,label:l.a.string.isRequired,onClick:l.a.func.isRequired};var Z=q,J=n(1186),X=n(610);function ee(){return o.a.createElement("svg",{className:"icon-reorder",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M18 7H4V5h14v2zm2 3H2v2h18v-2zm-2 5H4v2h14v-2z"}))}function te(e){var t=e.onClick;return o.a.createElement("svg",{className:"icon-cross-outline",onClick:t,xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M15.95 6.05c2.73 2.73 2.73 7.17 0 9.9s-7.17 2.728-9.9 0-2.728-7.17 0-9.9 7.17-2.73 9.9 0M11 2a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm4.243 11.828L12.413 11l2.83-2.828-1.415-1.414L11 9.586l-2.828-2.83-1.415 1.416L9.587 11l-2.83 2.828 1.415 1.414L11 12.414l2.828 2.828 1.415-1.414z"}))}function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(i,e);var t,n,r,a=ae(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={value:e.value},t}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.editable,r=t.isSelected,a=t.onClick,i=t.onDone,c=this.state.value,u=$()("tag-list-input","theme-color-fg",{"is-selected":r});return n?o.a.createElement("input",{className:u,readOnly:!n,onClick:a,value:c,onChange:function(t){return e.setState({value:t.target.value})},onBlur:i,spellCheck:!1}):o.a.createElement("button",{className:u,onClick:a},c)}}])&&re(t.prototype,n),r&&re(t,r),i}(r.Component),le=n(515),se=n(538);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ge(e);if(t){var o=ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he(this,n)}}function he(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?ve(e):t}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var we=Object(J.c)((function(){return o.a.createElement(ee,null)})),Te=Object(J.b)((function(e){var t=e.allowReordering,n=e.editingActive,r=e.isSelected,a=e.renameTag,i=e.selectTag,c=e.theme,u=e.trashTag,l=Ee(e.value,2),s=l[0],f=l[1];return o.a.createElement("li",{key:s,className:$()("tag-list-item","theme-".concat(c)),"data-tag-name":f.name},n&&o.a.createElement(te,{onClick:function(){return u(f.name)}}),o.a.createElement(ue,{editable:n,isSelected:r,onClick:function(){return!n&&i(f.name)},onDone:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.value;n&&n!==f.name&&a(f.name,n)},value:f.name}),n&&t&&o.a.createElement(we,null))})),Se=Object(J.a)((function(e){var t=e.editingTags,n=e.items,r=e.openedTag,a=e.openTag,i=e.renameTheTag,c=e.sortTagsAlpha,u=e.theme,l=e.trashTheTag;return o.a.createElement("ul",{className:"tag-list-items"},n.map((function(e,n){return o.a.createElement(Te,{key:e[0],allowReordering:!c,editingActive:t,index:n,isSelected:r===e[0],renameTag:i,selectTag:a,theme:u,trashTag:l,value:e})})))})),Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(i,e);var t,n,r,a=ye(i);function i(){var e;de(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return be(ve(e=a.call.apply(a,[this].concat(n))),"reorderTag",(function(t){var n=t.newIndex,r=t.nodes[t.oldIndex].node.dataset.tagName;e.props.reorderTag(r,n)})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.editingTags,n=e.onEditTags,r=e.openTag,a=e.openedTag,i=e.renameTag,c=e.sortTagsAlpha,u=e.tags,l=e.theme,s=e.trashTag,f=$()("tag-list",{"tag-list-editing":this.props.editingTags}),d=Array.from(u).filter((function(e){var t=Ee(e,2),n=(t[0],t[1].name);return!Object(X.a)(n)})).sort((function(e,t){var n=Ee(e,2),r=(n[0],n[1]),o=Ee(t,2),a=(o[0],o[1]);return c?r.name.localeCompare(a.name):void 0!==r.index&&void 0!==a.index?r.index-a.index:void 0===r.index?1:-1}));return o.a.createElement("div",{className:f},o.a.createElement("div",{className:"tag-list-title"},o.a.createElement(v.a,{headingLevel:2},"Tags"),d.length>0&&o.a.createElement("button",{className:"tag-list-edit-toggle button button-borderless",tabIndex:0,onClick:n},t?"Done":"Edit")),o.a.createElement(Se,{editingTags:t,lockAxis:"y",openedTag:a,openTag:r,items:d,renameTheTag:i,sortTagsAlpha:c,theme:l,onSortEnd:this.reorderTag,useDragHandle:!0,trashTheTag:s}))}}])&&pe(t.prototype,n),r&&pe(t,r),i}(r.Component);be(Ne,"displayName","TagList");var _e={onEditTags:le.toggleTagEditing,openTag:le.openTag,renameTag:function(e,t){return{type:"RENAME_TAG",oldTagName:e,newTagName:t}},reorderTag:function(e,t){return{type:"REORDER_TAG",tagName:e,newIndex:t}},trashTag:function(e){return{type:"TRASH_TAG",tagName:e}}},Ae=Object(a.b)((function(e){var t=e.data,n=e.settings.sortTagsAlpha,r=e.ui,o=r.editingTags,a=r.openedTag;return{editingTags:o,sortTagsAlpha:n,tags:t.tags,openedTag:a,theme:se.a(e)}}),_e)(Ne);function je(){return o.a.createElement("svg",{className:"icon-notes",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M18 4v10H8V4h10m0-2H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zM4 18V6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2H4zM16 6h-6v2h6V6zm0 4h-6v2h6v-2z"}))}function Ie(e){var t=e.onClick;return o.a.createElement("svg",{className:"icon-trash",onClick:t,xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M18 8.5V18a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8.5h2V18h10V8.5h2zM15 5V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v1H3v2h16V5h-4zM9 4h4v1H9V4zm1 12V8.5H8V16h2zm4 0V8.5h-2V16h2z"}))}function Re(){return o.a.createElement("svg",{className:"icon-settings",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M14 21H8v-2.587c-.684-.278-1.33-.652-1.917-1.11L3.84 18.6l-3-5.198 2.242-1.294C3.028 11.734 3 11.364 3 11s.027-.735.08-1.108L.84 8.598l3-5.196 2.244 1.295C6.67 4.24 7.317 3.865 8 3.587V1h6v2.587c.684.278 1.33.653 1.917 1.11l2.243-1.295 3 5.196-2.24 1.294c.053.374.08.744.08 1.108 0 .363-.027.734-.08 1.107l2.24 1.294-3 5.198-2.244-1.296c-.586.458-1.233.833-1.916 1.11V21zm-4-2h2v-2.04l.715-.212c.887-.265 1.718-.745 2.402-1.393l.542-.51 1.768 1.02 1-1.732-1.768-1.02.17-.726c.114-.47.17-.938.17-1.387 0-.45-.057-.916-.17-1.39l-.17-.723 1.768-1.02-1-1.733-1.77 1.022-.54-.512c-.686-.647-1.517-1.128-2.403-1.392L12 5.04V3h-2v2.04l-.715.212c-.887.265-1.718.746-2.4 1.392l-.543.512-1.77-1.022-1 1.73 1.77 1.022-.173.726c-.113.47-.17.94-.17 1.388s.057.916.17 1.39l.17.724-1.768 1.02 1 1.733 1.77-1.02.542.51c.685.647 1.515 1.128 2.402 1.393l.714.21V19zm1-4c-2.206 0-4-1.794-4-4s1.794-4 4-4 4 1.794 4 4-1.794 4-4 4zm0-6c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2z"}))}var Ce=n(133);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=He(e);if(t){var o=He(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xe(this,n)}}function xe(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?Ge(e):t}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(i,e);var t,n,r,a=Me(i);function i(){var e;ke(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ue(Ge(e=a.call.apply(a,[this].concat(n))),"handleClickOutside",(function(){var t=e.props,n=t.isDialogOpen,r=t.onOutsideClick,o=t.showNavigation;n||o&&r()})),Ue(Ge(e),"onHelpClicked",(function(){return Object(Ce.a)("http://simplenote.com/help")})),Ue(Ge(e),"onSelectTrash",(function(){e.props.selectTrash()})),Ue(Ge(e),"isSelected",(function(t){var n=t.isTrashRow,r=e.props,o=r.showTrash,a=r.openedTag;return n===o&&!a})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=(e.autoHideMenuBar,e.onAbout),n=e.onSettings,r=e.onShowAllNotes;return o.a.createElement("div",{className:"navigation-bar theme-color-bg theme-color-fg theme-color-border"},o.a.createElement("div",{className:"navigation-bar__folders"},o.a.createElement(Z,{icon:o.a.createElement(Re,null),label:"Settings",onClick:n}),o.a.createElement(Z,{icon:o.a.createElement(Ie,null),isSelected:this.isSelected({isTrashRow:!0}),label:"Trash",onClick:this.onSelectTrash}),o.a.createElement(Z,{icon:o.a.createElement(je,null),isSelected:this.isSelected({isTrashRow:!1}),label:"All Notes",onClick:r})),o.a.createElement("div",{className:"navigation-bar__tags theme-color-border"},o.a.createElement(Ae,null)),o.a.createElement("div",{className:"navigation-bar__tools theme-color-border"},o.a.createElement("div",{className:"navigation-bar__server-connection"},o.a.createElement(Y,null))),o.a.createElement("div",{className:"navigation-bar__footer"},o.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:this.props.showKeyboardShortcuts},"Keyboard Shortcuts")),o.a.createElement("div",{className:"navigation-bar__footer"},o.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:this.onHelpClicked},"Help & Support"),o.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:t},"About")))}}])&&Le(t.prototype,n),r&&Le(t,r),i}(r.Component);Ue(Be,"displayName","NavigationBar");var Ve={onAbout:function(){return j.a.ui.showDialog("ABOUT")},onOutsideClick:j.a.ui.toggleNavigation,onShowAllNotes:j.a.ui.showAllNotes,onSettings:function(){return j.a.ui.showDialog("SETTINGS")},selectTrash:j.a.ui.selectTrash,showKeyboardShortcuts:function(){return j.a.ui.showDialog("KEYBINDINGS")}},Fe=Object(a.b)((function(e){var t=e.settings,n=e.ui,r=n.dialogs,o=n.openedTag,a=n.showNavigation,i=n.showTrash;return{autoHideMenuBar:t.autoHideMenuBar,isDialogOpen:r.length>0,openedTag:o,showNavigation:a,showTrash:i}}),Ve)(Object(i.a)(Be)),ze=n(649);function We(){return o.a.createElement("svg",{className:"icon-back",xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M19 10H6.414l5.293-5.293-1.414-1.414L2.586 11l7.707 7.707 1.414-1.414L6.414 12H19z"}))}function Ke(){return o.a.createElement("svg",{className:"icon-info",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M11 4c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.14-7-7 3.14-7 7-7m0-2a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm1 8h-2v6h2v-6zm-1-4a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"}))}function Ye(){return o.a.createElement("svg",{className:"icon-preview",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M11,4C4.19,4,0,11,0,11s4.19,7,11,7,11-7,11-7S17.81,4,11,4Zm0,12c-4.13,0-7.22-3.29-8.56-5A14.22,14.22,0,0,1,7.39,6.84a4.5,4.5,0,1,0,7.23,0A14.44,14.44,0,0,1,19.56,11C18.23,12.73,15.16,16,11,16Z"}))}function Qe(){return o.a.createElement("svg",{className:"icon-preview-stop",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M0,11S4.19,4,11,4a10.09,10.09,0,0,1,3.4.6L7.17,11.83a4.42,4.42,0,0,1,.22-5A14.22,14.22,0,0,0,2.44,11a16.27,16.27,0,0,0,2.77,2.79L3.78,15.22A18,18,0,0,1,0,11Zm22,0s-4.19,7-11,7a10.13,10.13,0,0,1-3.4-.6L4,21,2.5,19.5l3.06-3.06L7,15l1.64-1.64,6.16-6.16L15,7l1.48-1.48L19.5,2.5,21,4,18.22,6.78A18,18,0,0,1,22,11Zm-2.44,0a16.27,16.27,0,0,0-2.77-2.79L15.5,9.5A4.5,4.5,0,0,1,11,14L9.21,15.79A7.9,7.9,0,0,0,11,16C15.16,16,18.23,12.73,19.56,11Z"}))}function $e(){return o.a.createElement("svg",{className:"icon-revisions",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M8.7,14.7l3.3-3.3V6h-2v4.6l-2.7,2.7L8.7,14.7z M11,2c5,0,9,4,9,9h-2c0-3.9-3.1-7-7-7s-7,3.1-7,7s3.1,7,7,7c2.4,0,4.5-1.2,5.7-3H13v-2h7v7h-2v-3.3c-1.6,2-4.2,3.3-7,3.3c-5,0-9-4-9-9S6,2,11,2z"}))}function qe(){return o.a.createElement("svg",{className:"icon-share",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M7.707 7.707L6.293 6.293 11 1.586l4.707 4.707-1.414 1.414L12 5.414V13h-2V5.414L7.707 7.707zM17 9v9H5V9H3v11h16V9h-2z"}))}function Ze(){return o.a.createElement("svg",{className:"icon-sidebar",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M19,3H3C1.895,3,1,3.895,1,5v12c0,1.105,0.895,2,2,2h16c1.105,0,2-0.895,2-2V5C21,3.895,20.105,3,19,3z M3,5h3v12H3V5z M19,17H8V5h11V17z"}))}function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=at(e);if(t){var o=at(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(e,t){return!t||"object"!==Je(t)&&"function"!=typeof t?ot(e):t}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(i,e);var t,n,r,a=nt(i);function i(){var e;Xe(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return it(ot(e=a.call.apply(a,[this].concat(n))),"renderNormal",(function(){var t=e.props,n=t.editMode,r=t.hasRevisions,a=t.isOffline,i=t.markdownEnabled,c=t.note,u=t.toggleNoteInfo;return c?o.a.createElement("div",{className:"note-toolbar"},o.a.createElement("div",{className:"note-toolbar__column-left"},o.a.createElement("div",{className:"note-toolbar__button note-toolbar__button-sidebar"},o.a.createElement(ze.a,{icon:o.a.createElement(Ze,null),onClick:e.props.toggleFocusMode,title:"Toggle Sidebar"})),o.a.createElement("div",{className:"note-toolbar__button note-toolbar-back"},o.a.createElement(ze.a,{icon:o.a.createElement(We,null),onClick:e.props.toggleNoteList,title:"Back • Ctrl+Shift+L"}))),a&&o.a.createElement("div",{className:"offline-badge"},"OFFLINE"),o.a.createElement("div",{className:"note-toolbar__column-right"},i&&o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(ze.a,{icon:n?o.a.createElement(Ye,null):o.a.createElement(Qe,null),onClick:e.props.toggleEditMode,title:"Preview • Ctrl+Shift+P"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(ze.a,{disabled:!r,icon:o.a.createElement($e,null),onClick:e.props.toggleRevisions,title:r?"History":"History (unavailable)"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(ze.a,{icon:o.a.createElement(qe,null),onClick:e.props.shareNote,title:"Share"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(ze.a,{icon:o.a.createElement(Ie,null),onClick:e.props.trashNote,title:"Trash"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(ze.a,{icon:o.a.createElement(Ke,null),onClick:u,title:"Info"})))):o.a.createElement("div",{className:"note-toolbar-placeholder theme-color-border"})})),it(ot(e),"renderTrashed",(function(){var t=e.props.isOffline;return o.a.createElement("div",{className:"note-toolbar-trashed"},o.a.createElement("div",{className:"note-toolbar__column-left"},o.a.createElement(ze.a,{icon:o.a.createElement(We,null),onClick:e.props.toggleNoteList,title:"Back • Ctrl+Shift+L"})),t&&o.a.createElement("div",{className:"offline-badge"},"OFFLINE"),o.a.createElement("div",{className:"note-toolbar__column-right"},o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement("button",{type:"button",className:"button button-compact button-danger",onClick:e.props.deleteNoteForever},"Delete Forever")),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement("button",{type:"button",className:"button button-primary button-compact",onClick:e.props.restoreNote},"Restore Note"))))})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props.note;return o.a.createElement("div",{className:"note-toolbar-wrapper theme-color-border"},(null==e?void 0:e.deleted)?this.renderTrashed():this.renderNormal())}}])&&et(t.prototype,n),r&&et(t,r),i}(r.Component);it(ct,"displayName","NoteToolbar");var ut={deleteNoteForever:j.a.ui.deleteOpenNoteForever,restoreNote:j.a.ui.restoreOpenNote,shareNote:function(){return j.a.ui.showDialog("SHARE")},toggleEditMode:j.a.ui.toggleEditMode,toggleFocusMode:j.a.settings.toggleFocusMode,toggleNoteInfo:j.a.ui.toggleNoteInfo,toggleNoteList:j.a.ui.toggleNoteList,toggleRevisions:j.a.ui.toggleRevisions,trashNote:j.a.ui.trashOpenNote},lt=Object(a.b)((function(e){var t,n,r=e.data,o=e.ui,a=o.editMode,i=o.openedNote,c=e.simperium.connectionStatus,u=i&&null!==(t=r.notes.get(i))&&void 0!==t?t:null;return{editMode:a,hasRevisions:!!(null===(n=r.noteRevisions.get(i))||void 0===n?void 0:n.size),isOffline:"offline"===c,markdownEnabled:(null==u?void 0:u.systemTags.includes("markdown"))||!1,note:u}}),ut)(ct),st=n(1183),ft=function(e){var t=e.disabled,n=e.min,r=e.max,a=e.value,i=e.onChange;return o.a.createElement("input",{className:"slider",disabled:t,type:"range",min:n,max:r,value:a,onChange:i})};function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e){return function(e){if(Array.isArray(e))return mt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ot(e);if(t){var o=Ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bt(this,n)}}function bt(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?Et(e):t}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(i,e);var t,n,r,a=gt(i);function i(){var e;yt(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return wt(Et(e=a.call.apply(a,[this].concat(n))),"handleClickOutside",(function(){return e.onCancelRevision()})),wt(Et(e),"onAcceptRevision",(function(){var t=e.props,n=t.noteId,r=t.openedRevision;(0,t.restoreRevision)(n,r)})),wt(Et(e),"onSelectRevision",(function(t){var n=t.target.value,r=e.props.revisions,o=parseInt(n,10),a=pt(r.keys())[o];e.props.openRevision(e.props.noteId,a)})),wt(Et(e),"onCancelRevision",(function(){e.props.cancelRevision()})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.isViewingRevisions,n=e.note,r=e.openedRevision,a=e.revisions;if(!t)return null;var i=a&&r?pt(a.keys()).indexOf(r):-1,c=!r||r&&i===(null==a?void 0:a.size)-1,u=Object(st.a)(1e3*(r?a.get(r).modificationDate:n.modificationDate),"MMM d, yyyy h:mm a"),l=$()("revision-selector",{"is-visible":t});return o.a.createElement("div",{className:l},o.a.createElement("div",{className:"revision-date"},"Originally created: ".concat(u)),o.a.createElement("div",{className:"revision-slider"},o.a.createElement(ft,{disabled:!a||0===a.size,min:1,max:(null==a?void 0:a.size)-1,value:i>-1?i:(null==a?void 0:a.size)-1,onChange:this.onSelectRevision})),o.a.createElement("div",{className:"revision-buttons"},o.a.createElement("button",{className:"button button-secondary button-compact",onClick:this.onCancelRevision},"Cancel"),o.a.createElement("button",{disabled:c,className:"button button-primary button-compact",onClick:this.onAcceptRevision},"Restore Note")))}}])&&ht(t.prototype,n),r&&ht(t,r),i}(r.Component),St=Object(a.b)((function(e){var t,n,r,o,a;return{isViewingRevisions:e.ui.showRevisions,noteId:e.ui.openedNote,note:null!==(t=e.data.notes.get(e.ui.openedNote))&&void 0!==t?t:null,openedRevision:(null===(n=e.ui.openedRevision)||void 0===n?void 0:n[0])===e.ui.openedNote&&null!==(r=null===(o=e.ui.openedRevision)||void 0===o?void 0:o[1])&&void 0!==r?r:null,revisions:null!==(a=e.data.noteRevisions.get(e.ui.openedNote))&&void 0!==a?a:null}}),{openRevision:function(e,t){return{type:"OPEN_REVISION",noteId:e,version:t}},cancelRevision:function(){return{type:"CLOSE_REVISION"}},restoreRevision:function(e,t){return{type:"RESTORE_NOTE_REVISION",noteId:e,version:t}}})(Object(i.a)(Tt));function Nt(){return o.a.createElement("svg",{className:"icon-new-note",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M19 10v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7v2H5v12h12v-7h2zm3-7h-3V0h-2v3h-3v2h3v3h2V5h3V3zm-7 5H7v2h8V8zm0 4H7v2h8v-2z"}))}function _t(){return o.a.createElement("svg",{className:"icon-cross-small",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M16.707 6.707l-1.414-1.414L11 9.586 6.707 5.293 5.293 6.707 9.586 11l-4.293 4.293 1.414 1.414L11 12.414l4.293 4.293 1.414-1.414L12.414 11z"}))}var At=new Set,jt=function(){return function(e){return function(t){var n=e(t);switch(t.type){case"SEARCH":At.forEach((function(e){return e()}));break;case"FOCUS_SEARCH_FIELD":At.forEach((function(e){return e("select")}))}return n}}};function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mt(e);if(t){var o=Mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?Pt(e):t}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}(c,e);var t,n,a,i=kt(c);function c(){var e;Rt(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return xt(Pt(e=i.call.apply(i,[this].concat(n))),"inputField",Object(r.createRef)()),xt(Pt(e),"blur",(function(){e.inputField.current&&e.inputField.current.blur()})),xt(Pt(e),"focus",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"focus-only";e.inputField.current&&("select"===t&&e.inputField.current.select(),e.inputField.current.focus())})),xt(Pt(e),"interceptEsc",(function(t){27===t.keyCode&&(""===e.props.searchQuery&&e.blur(),e.clearQuery())})),xt(Pt(e),"update",(function(t){var n=t.currentTarget.value;e.props.onSearch(n)})),xt(Pt(e),"clearQuery",(function(){return e.props.onSearch("")})),e}return t=c,(n=[{key:"componentDidMount",value:function(){var e;e=this.focus,At.add(e)}},{key:"render",value:function(){var e,t=this.props,n=t.openedTag,r=t.searchQuery,a=t.showTrash,i=r.length>0,c=a?"Trash":null!==(e=null==n?void 0:n.name)&&void 0!==e?e:"All Notes",u="Search "+(n?"notes with tag ":"")+c;return o.a.createElement("div",{className:"search-field"},o.a.createElement("input",{"aria-label":u,ref:this.inputField,type:"search",placeholder:c,onChange:this.update,onKeyUp:this.interceptEsc,value:r,spellCheck:!1}),o.a.createElement("button",{"aria-label":"Clear search",hidden:!i,onClick:this.clearQuery},o.a.createElement(_t,null)))}}])&&Ct(t.prototype,n),a&&Ct(t,a),c}(r.Component);xt(Gt,"displayName","SearchField");var Ht=Object(a.b)((function(e){var t,n=e.data,r=e.ui,o=r.openedTag,a=r.searchQuery,i=r.showTrash;return{openedTag:o&&null!==(t=n.tags.get(o))&&void 0!==t?t:null,searchQuery:a,showTrash:i}}),(function(e){return{onSearch:function(t){e(Object(le.search)(t))}}}))(Gt);function Ut(){return o.a.createElement("svg",{className:"icon-menu",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},o.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M21,11H3v2H21Zm0-5H3V8H21Zm0,10H3v2H21Z"})))}var Bt=n(549),Vt=function(e){var t=e.onNewNote,n=e.searchQuery,r=e.showTrash,a=e.toggleNavigation;return o.a.createElement("div",{className:"search-bar theme-color-border"},o.a.createElement(ze.a,{icon:o.a.createElement(Ut,null),onClick:a,title:"Menu • Ctrl+Shift+U"}),o.a.createElement(Ht,null),o.a.createElement(ze.a,{disabled:r,icon:o.a.createElement(Nt,null),onClick:function(){return t(Object(Bt.b)(n))},title:"New Note • Ctrl+Shift+I"}))};Vt.displayName="SearchBar";var Ft=Object(a.b)((function(e){var t=e.ui;return{searchQuery:t.searchQuery,showTrash:t.showTrash}}),(function(e){return{onNewNote:function(t){e(Object(le.createNote)(t))},toggleNavigation:function(){e(Object(le.toggleNavigation)())}}}))(Vt),zt=n(650),Wt=n(1198);function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qt=function(e){var t=e.children,n=e.delay,a=void 0===n?1e3:n,i=Kt(Object(r.useState)(!1),2),c=i[0],u=i[1];return Object(r.useEffect)((function(){var e=window.setTimeout((function(){u(!0)}),a);return function(){return window.clearTimeout(e)}}),[]),o.a.createElement(Wt.a,{classNames:"transition-delay-enter",in:c,mountOnEnter:!0,timeout:200,unmountOnExit:!0},t)};function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nn(e);if(t){var o=nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return en(this,n)}}function en(e,t){return!t||"object"!==$t(t)&&"function"!=typeof t?tn(e):t}function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var on=o.a.lazy((function(){return Promise.all([n.e(16),n.e(6)]).then(n.bind(null,1271))})),an=o.a.lazy((function(){return Promise.all([n.e(0),n.e(15),n.e(5)]).then(n.bind(null,1269))})),cn=o.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,792))})),un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jt(e,t)}(c,e);var t,n,a,i=Xt(c);function c(){var e;qt(this,c);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return rn(tn(e=i.call.apply(i,[this].concat(n))),"openKeybindingsHelp",(function(t){if(e.props.keyboardShortcuts){var n=e.props,r=n.hideKeyboardShortcuts,o=n.keyboardShortcutsAreOpen,a=n.showKeyboardShortcuts,i=t.ctrlKey,c=t.metaKey,u=t.key.toLowerCase();(i||c)&&"/"===u&&(o?r():a(),t.stopPropagation(),t.preventDefault())}})),rn(tn(e),"render",(function(){var t=e.props,n=t.showNoteList,a=t.hasRevisions,i=t.isFocusMode,c=void 0!==i&&i,u=t.isNavigationOpen,l=t.isNoteInfoOpen,s=t.isNoteOpen,f=t.isSmallScreen,d=t.openedNote,p=t.openedRevision,m=t.showRevisions,y=$()("app-layout",{"is-focus-mode":c,"is-navigation-open":u,"is-note-open":s,"is-showing-note-info":l}),h=!(n&&f),v=o.a.createElement(Qt,{delay:1e3},o.a.createElement("div",{className:"app-layout__placeholder"},o.a.createElement(zt.a,null)));return o.a.createElement("div",{className:y},o.a.createElement(r.Suspense,{fallback:v},o.a.createElement("div",{className:"app-layout__source-column theme-color-bg theme-color-fg"},o.a.createElement(Ft,null),o.a.createElement(on,null)),h&&o.a.createElement("div",{className:"app-layout__note-column theme-color-bg theme-color-fg theme-color-border"},a&&o.a.createElement(St,null),o.a.createElement(lt,null),m?o.a.createElement(cn,{noteId:d,note:p}):o.a.createElement(an,null))))})),e}return t=c,(n=[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.openKeybindingsHelp,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.openKeybindingsHelp,!1)}}])&&Zt(t.prototype,n),a&&Zt(t,a),c}(r.Component),ln={hideKeyboardShortcuts:function(){return j.a.ui.closeDialog("KEYBINDINGS")},showKeyboardShortcuts:function(){return j.a.ui.showDialog("KEYBINDINGS")}},sn=Object(a.b)((function(e){var t,n,r,o;return{hasRevisions:e.ui.showRevisions&&e.data.noteRevisions.has(e.ui.openedNote),keyboardShortcutsAreOpen:e.ui.dialogs.includes("KEYBINDINGS"),keyboardShortcuts:e.settings.keyboardShortcuts,isFocusMode:e.settings.focusModeEnabled,isNavigationOpen:e.ui.showNavigation,isNoteInfoOpen:e.ui.showNoteInfo,isNoteOpen:!e.ui.showNoteList,isSmallScreen:se.b(e),openedRevision:(null===(t=e.ui.openedRevision)||void 0===t?void 0:t[0])===e.ui.openedNote&&null!==(n=null===(r=e.data.noteRevisions.get(e.ui.openedNote))||void 0===r?void 0:r.get(null===(o=e.ui.openedRevision)||void 0===o?void 0:o[1]))&&void 0!==n?n:null,openedNote:e.ui.openedNote,showNoteList:e.ui.showNoteList,showRevisions:e.ui.showRevisions}}),ln)(un),fn=function(){return o.a.createElement("div",{className:"dev-badge"},"DEV")},dn=n(129),pn=n.n(dn),mn=n(196),yn=n(94),hn=n(131);function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tn(e);if(t){var o=Tn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wn(this,n)}}function wn(e,t){return!t||"object"!==vn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(i,e);var t,n,r,a=On(i);function i(){return gn(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.closeDialog;return o.a.createElement("div",{className:"about"},o.a.createElement(hn.a,{hideTitleBar:!0,onDone:e,title:"Beta Release"},o.a.createElement("div",{className:"about-top"},o.a.createElement(yn.a,null),o.a.createElement("h1",null,"Simplenote")),o.a.createElement("p",{style:{textAlign:"center"}},"This is a beta release of Simplenote."),o.a.createElement("p",{style:{textAlign:"center"}},"This release provides an opportunity to test and share early feedback for a major overhaul of the internals of the app."),o.a.createElement("p",{style:{textAlign:"center"}},"Please use with caution and the understanding that ",o.a.createElement("br",null),"this comes without any stability guarantee."),o.a.createElement("button",{type:"button","aria-label":"Close dialog",className:"about-done button button-borderless",onClick:e},o.a.createElement(O.a,null))))}}])&&bn(t.prototype,n),r&&bn(t,r),i}(r.Component),Nn={closeDialog:le.closeDialog},_n=Object(a.b)(null,Nn)(Sn);function An(){return o.a.createElement("svg",{className:"icon-attention",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},o.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M14.72,11.75,9.3,2.28a1.49,1.49,0,0,0-2.6,0L1.28,11.75A1.51,1.51,0,0,0,2.59,14H13.41A1.51,1.51,0,0,0,14.72,11.75ZM8,13a1,1,0,1,1,1-1A1,1,0,0,1,8,13ZM9,9A1,1,0,0,1,7,9V5A1,1,0,0,1,9,5Z"})))}var jn=function(e){var t=[];return e.data.notes.forEach((function(n,r){var o,a=null===(o=e.simperium.ghosts[1].get("note"))||void 0===o?void 0:o.get(r);a&&Object(se.d)(n,a.data)||t.push(r)})),t},In=function(e){return{notes:jn(e),preferences:[],tags:[]}},Rn=n(805),Cn=n.n(Rn);function Dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Ln(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e){return function(e){if(Array.isArray(e))return Pn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ln(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){if(e){if("string"==typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pn(e,t):void 0}}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mn=/(?!\r)\n/g,xn=function(e){var t=[],n=[];return kn(e.entries()).forEach((function(e){var r=Dn(e,2),o=r[0],a=r[1],i=Dn(Object(c.partition)(Object(c.sortBy)(a.tags,(function(e){return e.toLocaleLowerCase()})),X.a),2),u=i[0],l=i[1],s=Object.assign({id:o,content:a.content.replace(Mn,"\r\n"),creationDate:new Date(1e3*a.creationDate).toISOString(),lastModified:new Date(1e3*a.modificationDate).toISOString()},a.systemTags.includes("pinned")&&{pinned:!0},a.systemTags.includes("markdown")&&{markdown:!0},l.length&&{tags:l},a.systemTags.includes("published")&&(null==a?void 0:a.publishURL)&&{publicURL:"http://simp.ly/p/".concat(a.publishURL)},a.systemTags.includes("shared")&&u.length&&{collaboratorEmails:u});a.deleted?n.push(s):t.push(s)})),Promise.resolve({activeNotes:t,trashedNotes:n})},Gn=n(806),Hn=n.n(Gn);function Un(e){return function(e){if(Array.isArray(e))return Fn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Vn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Vn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vn(e,t){if(e){if("string"==typeof e)return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(e,t):void 0}}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){Kn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yn=function(e){return Wn(Wn({},e),{},{fileName:e.content.split("\n").map((function(e){return e.trim()})).map(Hn.a).filter(c.identity).concat("untitled").shift().slice(0,40)})},Qn=function(e){if(!e.tags)return e;var t=e.tags.reduce((function(e,t){var n=Bn(e,2),r=n[0],o=n[1];return o.length+t.length>75?[[].concat(Un(r),[o]),t]:[r,"".concat(o,", ").concat(t)]}),[[],""]).reduce((function(e,t){return[].concat(Un(e),[t])})).map((function(e){return e.replace(/^, /,"")}));return Wn(Wn({},e),{},{content:"".concat(e.content,"\n\nTags:\n  ").concat(t.join("\n  "))})},$n=function(e,t){var n=Bn(e,2),r=n[0],o=n[1],a=Object(c.update)(o,t.fileName,(function(e){return e||0===e?e+1:0})),i=a[t.fileName],u=i>0?"".concat(t.fileName," (").concat(i,")"):t.fileName;return[[].concat(Un(r),[Wn(Wn({},t),{},{fileName:u})]),a]},qn=function(e){return n.e(14).then(n.t.bind(null,1199,7)).then((function(t){var n=new(0,t.default);return n.file("source/notes.json",JSON.stringify(e,null,2).replace(Mn,"\r\n")),e.activeNotes.map(Qn).map(Yn).reduce($n,[[],{}]).shift().forEach((function(e){var t=e.content,r=e.fileName,o=e.lastModified;n.file("".concat(r,".txt"),t,{date:new Date(o)})})),e.trashedNotes.map(Qn).map(Yn).reduce($n,[[],{}]).shift().forEach((function(e){var t=e.content,r=e.fileName,o=e.lastModified;n.file("trash/".concat(r,".txt"),t,{date:new Date(o)})})),n})).catch(console.log)},Zn=function(e){return xn(e).then(qn).then((function(e){return e.generateAsync({compression:"DEFLATE",platform:Object(c.get)(window,"process.platform","DOS"),type:"blob"})})).then((function(e){return Cn()(e,"notes.zip")})).catch(console.log)};function Jn(e){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||tr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e){return function(e){if(Array.isArray(e))return nr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||tr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(e,t){if(e){if("string"==typeof e)return nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nr(e,t):void 0}}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ar(e,t){return(ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lr(e);if(t){var o=lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cr(this,n)}}function cr(e,t){return!t||"object"!==Jn(t)&&"function"!=typeof t?ur(e):t}function ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ar(e,t)}(c,e);var t,n,a,i=ir(c);function c(){var e;rr(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sr(ur(e=i.call.apply(i,[this].concat(n))),"exportUnsyncedNotes",(function(){var t=e.props,n=t.closeDialog,r=t.notes;Zn(r).then(n)})),e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.description,n=e.unsafeAction,a=e.safeAction,i=e.closeDialog,c=e.action,u=e.notes;return o.a.createElement("div",{className:"logoutConfirmation"},o.a.createElement(hn.a,{onDone:i,title:"Unsynchronized Notes"},o.a.createElement("p",{className:"explanation"},u.size>0?t:"All notes have synchronized!"),u.size>0&&o.a.createElement(r.Fragment,null,o.a.createElement("p",{className:"explanation-secondary"},"Possibly unsynchronized notes"),o.a.createElement("section",{className:"change-list"},o.a.createElement("ul",null,er(u.entries()).map((function(e){var t=Xn(e,2),n=t[0],r=t[1],a=Object(w.c)(r),i=a.title;return a.preview,o.a.createElement("li",{key:n},o.a.createElement(An,null),o.a.createElement("span",{className:"note-title"},i))}))))),u.size>0&&o.a.createElement("button",{className:"export-unsynchronized",onClick:this.exportUnsyncedNotes},"Export unsynchronized notes"),o.a.createElement("section",{className:"action-button"},o.a.createElement("button",{className:"log-out",onClick:c},u.size>0?n:a))))}}])&&or(t.prototype,n),a&&or(t,a),c}(r.Component),dr={closeDialog:le.closeDialog},pr=Object(a.b)((function(e){var t=In(e);return{notes:new Map(t.notes.map((function(t){return[t,e.data.notes.get(t)]})))}}),dr)(fr),mr={reallyCloseWindow:j.a.electron.reallyCloseWindow},yr=Object(a.b)(null,mr)((function(e){var t=e.reallyCloseWindow;return o.a.createElement(pr,{description:"Closing the app with unsynchronized notes could cause data loss.",unsafeAction:"Close window",safeAction:"Safely close window",action:t})})),hr=n(77),vr=function(e){var t=e.items,n=e.onClickItem;return o.a.createElement("ul",{className:"button-group"},t.map((function(e){return o.a.createElement("li",{key:e.slug,className:"button-group__item theme-color-border"},o.a.createElement("button",{type:"button",onClick:function(){return n(e)}},e.name))})))};vr.propTypes={items:l.a.array.isRequired,onClickItem:l.a.func.isRequired};var gr=vr,br=[{name:"Evernote",slug:"evernote",acceptedTypes:".enex",electronOnly:!0,instructions:"Choose an Evernote export file (.enex)",optionsHint:"Images and other media will not be imported."},{name:"Simplenote",slug:"simplenote",acceptedTypes:".json",instructions:"Choose a Simplenote export file (.json)"},{name:"Plain text files",slug:"plaintext",acceptedTypes:".txt,.md",instructions:"Choose one or more text files (.txt, .md)",multiple:!0}],Er=function(e){var t=e.selectSource;return o.a.createElement(r.Fragment,null,o.a.createElement(v.a,{headingLevel:"3"},"Import from"),o.a.createElement(gr,{items:hr.a?br:Object(c.reject)(br,(function(e){return e.electronOnly})),onClickItem:function(e){return t(e)}}))};Er.propTypes={selectSource:l.a.func.isRequired};var Or=Er,wr=n(651),Tr=n(198);function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ar(e,t){return(Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Cr(e);if(t){var o=Cr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ir(this,n)}}function Ir(e,t){return!t||"object"!==Sr(t)&&"function"!=typeof t?Rr(e):t}function Rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(e){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kr=o.a.lazy((function(){return Promise.all([n.e(19),n.e(8)]).then(n.bind(null,1270))})),Lr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ar(e,t)}(c,e);var t,n,a,i=jr(c);function c(){var e;Nr(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Dr(Rr(e=i.call.apply(i,[this].concat(n))),"state",{importStarted:!1,selectedSource:void 0}),e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props.closeDialog,n=this.state,a=n.importStarted,i=n.selectedSource,c=Boolean(i),u=o.a.createElement(Qt,{delay:1e3},o.a.createElement("div",{className:"import__placeholder"},o.a.createElement(Tr.a,{size:60})));return o.a.createElement(hn.a,{className:"import",closeBtnLabel:a?"":"Cancel",onDone:a?void 0:t,title:"Import Notes"},o.a.createElement("div",{className:"import__inner"},!c&&o.a.createElement(Or,{locked:a,selectSource:function(t){return e.setState({selectedSource:t})}}),o.a.createElement(wr.a,{wrapperClassName:"import__source-importer-wrapper",shouldMount:c},o.a.createElement(r.Suspense,{fallback:u},o.a.createElement(kr,{locked:a,onClose:t,onStart:function(){return e.setState({importStarted:!0})},source:i})))))}}])&&_r(t.prototype,n),a&&_r(t,a),c}(r.Component),Pr={closeDialog:le.closeDialog},Mr=Object(a.b)(null,Pr)(Lr);function xr(e){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ur(e,t){return(Ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fr(e);if(t){var o=Fr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vr(this,n)}}function Vr(e,t){return!t||"object"!==xr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fr(e){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zr=function(e){var t=e.keys,n=e.children;return o.a.createElement("div",{className:"keybindings__key-item"},o.a.createElement("div",{className:"keybindings__key-list"},t.map((function(e,t){return o.a.createElement(r.Fragment,{key:t},t>0&&" + ","string"==typeof e?o.a.createElement("kbd",{key:e},e):o.a.createElement(o.a.Fragment,null,o.a.createElement("kbd",null,e[0])," / ",o.a.createElement("kbd",null,e[1])))})))," - ",o.a.createElement("div",{className:"keybindings__key-description"},n))},Wr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ur(e,t)}(i,e);var t,n,r,a=Br(i);function i(){return Gr(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.closeDialog,t=hr.b?"Cmd":"Ctrl";return o.a.createElement("div",{className:"keybindings"},o.a.createElement(hn.a,{onDone:e,title:"Keyboard Shortcuts"},o.a.createElement("div",{className:"keybindings__sections"},o.a.createElement("section",null,o.a.createElement("h1",null,"View"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"/"]},"Show keyboard shortcuts")),o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","F"]},"Toggle focus mode")),o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","S"]},"Focus search field")),o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"G"]},"Jump to next match in note")),o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","G"]},"Jump to previous match in note")),hr.a&&o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"+"]},"Increase font size")),hr.a&&o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"-"]},"Decrease font size")),hr.a&&o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"0"]},"Reset font size")))),o.a.createElement("section",null,o.a.createElement("h1",null,"Navigation"),o.a.createElement("ul",null,hr.a&&o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,","]},"Open app preferences")),hr.a&&o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","E"]},"Export all notes")),o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","U"]},"Toggle tag list")),o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","K"]},"Open note above current one")),o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","J"]},"Open note below current one")),o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","Y"]},"Toggle editing content/tags")),o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","L"]},"Toggle note list (on narrow screens)")))),o.a.createElement("section",null,o.a.createElement("h1",null,"Note Editing"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","I"]},"Create new note")),hr.a&&o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"P"]},"Print note")),o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","P"]},"Toggle Markdown preview")),o.a.createElement("li",null,o.a.createElement(zr,{keys:[t,"Shift","C"]},"Insert checklist item")))))))}}])&&Hr(t.prototype,n),r&&Hr(t,r),i}(r.Component),Kr={closeDialog:le.closeDialog},Yr=Object(a.b)(null,Kr)(Wr),Qr={reallyLogOut:j.a.ui.reallyLogOut},$r=Object(a.b)(null,Qr)((function(e){var t=e.reallyLogOut;return o.a.createElement(pr,{description:"Logging out will delete any unsynchronized notes.",unsafeAction:"Log out",safeAction:"Safely log out",action:t})})),qr=n(1185);function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eo(e,t){return(eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function to(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ro(e);if(t){var o=ro(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return no(this,n)}}function no(e,t){return!t||"object"!==Zr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ro(e){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oo,ao,io,co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eo(e,t)}(i,e);var t,n,r,a=to(i);function i(){return Jr(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.tabNames;return o.a.createElement(qr.d,{selectedTabClassName:"is-active"},o.a.createElement(qr.b,{className:"tab-panels__tab-list theme-color-border"},n.map((function(e,t){return o.a.createElement(qr.a,{className:"button button-borderless",key:t},e)}))),o.a.createElement("div",{className:"tab-panels__panel"},o.a.Children.map(t,(function(e,t){return o.a.createElement(qr.c,{key:t},o.a.createElement("div",{className:"tab-panels__column"},e))}))))}}])&&Xr(t.prototype,n),r&&Xr(t,r),i}(r.Component);oo=co,ao="propTypes",io={children:l.a.node.isRequired,className:l.a.string,tabNames:l.a.arrayOf(l.a.string).isRequired},ao in oo?Object.defineProperty(oo,ao,{value:io,enumerable:!0,configurable:!0,writable:!0}):oo[ao]=io;var uo=co,lo=function(){return null},so=function(e){var t=e.title,n=e.slug,r=e.activeSlug,a=e.description,i=e.onChange,c=e.learnMoreURL,u=e.renderer,l=e.children,s=o.a.createElement("a",{href:c,onClick:function(e){e.preventDefault(),Object(Ce.a)(c)}},"Learn more"),f=o.a.Children.toArray(l).filter((function(e){return e}));return o.a.createElement("div",{className:"settings-group"},o.a.createElement(v.a,{headingLevel:3},t),o.a.createElement("div",{className:"settings-items theme-color-border"},f.map((function(e){var a=e.props,c=a.slug,l=a.title;return o.a.createElement("label",{className:"settings-item theme-color-border",htmlFor:"settings-field-".concat(n,"-").concat(c),key:c},o.a.createElement("div",{className:"settings-item-label"},l),o.a.createElement("div",{className:"settings-item-control"},u({activeSlug:r,groupTitle:t,groupSlug:n,slug:c,title:l,isEnabled:c===r,onChange:i})))}))),a&&o.a.createElement("p",null,a," ",c&&s))};so.propTypes={activeSlug:l.a.string,children:l.a.node,description:l.a.string,learnMoreURL:l.a.string,onChange:l.a.func,renderer:l.a.func,slug:l.a.string,title:l.a.string};var fo=so,po=function(e){var t=e.groupSlug,n=e.slug,r=e.isEnabled,a=e.onChange;return o.a.createElement(E,{name:t,value:n,id:"settings-field-".concat(t,"-").concat(n),checked:r,onChange:a})},mo=n(74),yo={logout:j.a.ui.logout,toggleAnalytics:j.a.data.toggleAnalytics},ho=Object(a.b)((function(e){return{accountName:e.settings.accountName,analyticsEnabled:e.data.analyticsAllowed}}),yo)((function(e){var t=e.accountName,n=e.analyticsEnabled,r=e.logout,a=e.toggleAnalytics;return o.a.createElement("div",{className:"settings-account"},o.a.createElement(v.a,{headingLevel:3},"Account"),o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("div",{className:"settings-item theme-color-border"},o.a.createElement("span",{className:"settings-account-name"},t))),o.a.createElement("ul",{className:"dialog-actions"},o.a.createElement("li",null,o.a.createElement("button",{type:"button",className:"button button-borderless",onClick:function(){Object(Ce.a)("https://app.simplenote.com/settings/?from=react")}},"Edit Account ",o.a.createElement(mo.a,null))),o.a.createElement("li",null,o.a.createElement(fo,{title:"Privacy",slug:"shareAnalytics",activeSlug:n?"enabled":"",description:"Help us improve Simplenote by sharing usage data with our analytics tool.",onChange:a,learnMoreURL:"https://automattic.com/cookies",renderer:po},o.a.createElement(lo,{title:"Share analytics",slug:"enabled"}))),o.a.createElement("li",null,o.a.createElement("button",{type:"button",className:"button button-primary",onClick:r},"Log Out"))))}));function vo(){return(vo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function go(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var bo=function(e){var t=e.className,n=go(e,["className"]);return o.a.createElement("span",{className:$()("checkbox-control",t)},o.a.createElement("input",vo({type:"checkbox"},n)),o.a.createElement("span",{className:"checkbox-control-base"},o.a.createElement("span",{className:"checkbox-control-checked"})))},Eo=function(e){var t=e.groupSlug,n=e.slug,r=e.isEnabled,a=e.onChange;return o.a.createElement(bo,{type:"radio",name:t,value:n,id:"settings-field-".concat(t,"-").concat(n),checked:r,onChange:function(){return a(n)}})};Eo.propTypes={groupSlug:l.a.string,slug:l.a.string,isEnabled:l.a.bool.isRequired,onChange:l.a.func.isRequired};var Oo=Eo,wo={setActiveTheme:j.a.settings.activateTheme,setLineLength:j.a.settings.setLineLength,setNoteDisplay:j.a.settings.setNoteDisplay,setSortType:j.a.settings.setSortType,toggleAutoHideMenuBar:j.a.settings.toggleAutoHideMenuBar,toggleSortOrder:j.a.settings.toggleSortOrder,toggleSortTagsAlpha:j.a.settings.toggleSortTagsAlpha},To=Object(a.b)((function(e){var t=e.settings;return{activeTheme:t.theme,autoHideMenuBar:t.autoHideMenuBar,lineLength:t.lineLength,noteDisplay:t.noteDisplay,sortIsReversed:t.sortReversed,sortTagsAlpha:t.sortTagsAlpha,sortType:t.sortType}}),wo)((function(e){return o.a.createElement(r.Fragment,null,o.a.createElement(fo,{title:"Note display",slug:"noteDisplay",activeSlug:e.noteDisplay,onChange:e.setNoteDisplay,renderer:Oo},o.a.createElement(lo,{title:"Comfy",slug:"comfy"}),o.a.createElement(lo,{title:"Condensed",slug:"condensed"}),o.a.createElement(lo,{title:"Expanded",slug:"expanded"})),o.a.createElement(fo,{title:"Line length",slug:"lineLength",activeSlug:e.lineLength,onChange:e.setLineLength,renderer:Oo},o.a.createElement(lo,{title:"Narrow",slug:"narrow"}),o.a.createElement(lo,{title:"Full",slug:"full"})),o.a.createElement(fo,{title:"Sort type",slug:"sortType",activeSlug:e.sortType,onChange:e.setSortType,renderer:Oo},o.a.createElement(lo,{title:"Date modified",slug:"modificationDate"}),o.a.createElement(lo,{title:"Date created",slug:"creationDate"}),o.a.createElement(lo,{title:"Alphabetical",slug:"alphabetical"})),o.a.createElement(fo,{title:"Sort order",slug:"sortOrder",activeSlug:e.sortIsReversed?"reversed":"",onChange:e.toggleSortOrder,renderer:po},o.a.createElement(lo,{title:"Reversed",slug:"reversed"})),o.a.createElement(fo,{title:"Tags",slug:"sortTagsAlpha",activeSlug:e.sortTagsAlpha?"alpha":"",onChange:e.toggleSortTagsAlpha,renderer:po},o.a.createElement(lo,{title:"Sort Alphabetically",slug:"alpha"})),o.a.createElement(fo,{title:"Theme",slug:"theme",activeSlug:e.activeTheme,onChange:e.setActiveTheme,renderer:Oo},-1===navigator.userAgent.toLowerCase().indexOf(" electron/")&&o.a.createElement(lo,{title:"System",slug:"system"}),o.a.createElement(lo,{title:"Light",slug:"light"}),o.a.createElement(lo,{title:"Dark",slug:"dark"})),hr.a&&!hr.b&&o.a.createElement(fo,{title:"Menu Bar",slug:"autoHideMenuBar",activeSlug:e.autoHideMenuBar?"autoHide":"",description:"When set to auto-hide, press the Alt key to toggle.",onChange:e.toggleAutoHideMenuBar,renderer:po},o.a.createElement(lo,{title:"Hide Automatically",slug:"autoHide"})))})),So={exportNotes:function(){return j.a.data.exportNotes()},requestNotifications:function(e){return{type:"REQUEST_NOTIFICATIONS",sendNotifications:e}},showImportDialog:function(){return Object(le.showDialog)("IMPORT")},toggleShortcuts:function(){return j.a.settings.toggleKeyboardShortcuts()}},No=Object(a.b)((function(e){var t=e.settings;return{keyboardShortcuts:t.keyboardShortcuts,sendNotifications:t.sendNotifications}}),So)((function(e){var t=e.exportNotes,n=e.keyboardShortcuts,a=e.requestNotifications,i=e.sendNotifications,c=e.showImportDialog,u=e.toggleShortcuts;return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"settings-tools"},o.a.createElement(v.a,{headingLevel:3},"Tools"),o.a.createElement(gr,{items:[{name:"Import Notes",slug:"import"},{name:"Export Notes",slug:"export"}],onClickItem:function(e){"import"===e.slug?c():"export"===e.slug&&t()}})),o.a.createElement(fo,{slug:"keyboardShortcuts",activeSlug:n?"keyboardShortcuts":"",onChange:u,renderer:po},o.a.createElement(lo,{title:"Keyboard Shortcuts",slug:"keyboardShortcuts"})),o.a.createElement(fo,{slug:"allowNotifications",activeSlug:i?"allowNotifications":"",onChange:function(){return a(!i)},renderer:po},o.a.createElement(lo,{title:"Notify on remote changes",slug:"allowNotifications"})))})),_o=["account","display","tools"],Ao=Object(a.b)(null,{closeDialog:le.closeDialog})((function(e){var t=e.closeDialog;return o.a.createElement(hn.a,{className:"settings",title:"Settings",onDone:t},o.a.createElement(uo,{tabNames:_o},o.a.createElement(ho,null),o.a.createElement(To,null),o.a.createElement(No,null)))})),jo=n(810),Io=n.n(jo);function Ro(e){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ko(e,t){return(ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xo(e);if(t){var o=xo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Po(this,n)}}function Po(e,t){return!t||"object"!==Ro(t)&&"function"!=typeof t?Mo(e):t}function Mo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xo(e){return(xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Go(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ho=["collaborate","publish"],Uo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ko(e,t)}(i,e);var t,n,r,a=Lo(i);function i(){var e;Co(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Go(Mo(e=a.call.apply(a,[this].concat(n))),"onTogglePublished",(function(t){e.props.publishNote(e.props.noteId,t)})),Go(Mo(e),"getPublishURL",(function(e){return Object(c.isEmpty)(e)?void 0:"http://simp.ly/p/".concat(e)})),Go(Mo(e),"onAddCollaborator",(function(t){var n=e.props.noteId,r=e.collaboratorElement.value.trim();t.preventDefault(),e.collaboratorElement.value="";var o=e.props.settings.accountName===r;""===r||o||e.props.addCollaborator(n,r)})),Go(Mo(e),"onRemoveCollaborator",(function(t){var n=e.props.noteId;e.props.removeCollaborator(n,t)})),Go(Mo(e),"collaborators",(function(){var t=e.props.note,n=((null==t?void 0:t.tags)||[]).filter(X.a);return n.reverse(),n})),Go(Mo(e),"gravatarURL",(function(e){var t=(new Io.a).update(e.trim().toLowerCase()).digest("hex").toLowerCase();return"https://secure.gravatar.com/avatar/".concat(t,".jpg?s=68")})),e}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.closeDialog,r=t.note||{},a=Object(c.includes)(r.systemTags,"published"),i=this.getPublishURL(r.publishURL);return o.a.createElement(hn.a,{className:"settings",title:"Share",onDone:n},o.a.createElement(uo,{tabNames:Ho},o.a.createElement("div",null,o.a.createElement("div",{className:"settings-group"},o.a.createElement("p",null,"Add an email address of another Simplenote user to share a note. You'll both be able to edit and view the note."),o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("form",{className:"settings-item theme-color-border",onSubmit:this.onAddCollaborator},o.a.createElement("input",{className:"settings-item-text-input transparent-input",pattern:"^[^@]+@.+",placeholder:"email@example.com",ref:function(t){return e.collaboratorElement=t},spellCheck:!1,title:"Please enter a valid email"}),o.a.createElement("div",{className:"settings-item-control"},o.a.createElement("button",{type:"submit",className:"button button-borderless"},"Add Email"))))),o.a.createElement("div",{className:"settings-group"},o.a.createElement("div",{className:"share-collaborators-heading theme-color-border"},o.a.createElement(v.a,{headingLevel:3},"Collaborators")),o.a.createElement("ul",{className:"share-collaborators"},this.collaborators().map((function(t){return o.a.createElement("li",{key:t,className:"share-collaborator"},o.a.createElement("span",{className:"share-collaborator-photo"},o.a.createElement("img",{src:e.gravatarURL(t),width:"34",height:"34"})),o.a.createElement("span",{className:"share-collaborator-name"},t),o.a.createElement("button",{className:"share-collaborator-remove button button-borderless button-danger",onClick:e.onRemoveCollaborator.bind(e,t)},"Remove"))}))))),o.a.createElement("div",null,o.a.createElement("div",{className:"settings-group"},o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("label",{htmlFor:"settings-field-public",className:"settings-item theme-color-border"},o.a.createElement("div",{className:"settings-item-label"},"Make public link"),o.a.createElement("div",{className:"settings-item-control"},o.a.createElement(E,{id:"settings-field-public",onChange:this.onTogglePublished,checked:a})))),o.a.createElement("p",null,"Ready to share your note with the world? Anyone with the public link will be able to view the latest version.")),a&&o.a.createElement("div",{className:"settings-group"},o.a.createElement(v.a,{headingLevel:3},"Public link"),o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("div",{className:"settings-item theme-color-border"},o.a.createElement("input",{ref:function(t){return e.publishUrlElement=t},className:"settings-item-text-input transparent-input",placeholder:a?"Publishing note…":"Note not published",value:i,readOnly:!0,spellCheck:!1}),o.a.createElement("div",{className:"settings-item-control"},i&&o.a.createElement(y,{text:i})))),i&&o.a.createElement("p",null,"Note published!")))))}}])&&Do(t.prototype,n),r&&Do(t,r),i}(r.Component),Bo={addCollaborator:j.a.data.addCollaborator,closeDialog:j.a.ui.closeDialog,editNote:j.a.data.editNote,publishNote:j.a.data.publishNote,removeCollaborator:j.a.data.removeCollaborator},Vo=Object(a.b)((function(e){var t=e.data,n=e.settings,r=e.ui.openedNote;return{settings:n,noteId:r,note:t.notes.get(r)}}),Bo)(Uo);function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ko(e,t){return(Ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$o(e);if(t){var o=$o(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qo(this,n)}}function Qo(e,t){return!t||"object"!==Fo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $o(e){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ko(e,t)}(c,e);var t,n,a,i=Yo(c);function c(){return zo(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.theme,n=e.closeDialog;return o.a.createElement(r.Fragment,null,this.props.dialogs.map((function(e){return o.a.createElement(pn.a,{key:e,className:"dialog-renderer__content",contentLabel:e,isOpen:!0,onRequestClose:n,overlayClassName:"dialog-renderer__overlay",portalClassName:"dialog-renderer__portal theme-".concat(t)},"ABOUT"===e?o.a.createElement(mn.a,{key:"about",closeDialog:n}):"BETA-WARNING"===e?o.a.createElement(_n,{key:"beta-warning"}):"CLOSE-WINDOW-CONFIRMATION"===e?o.a.createElement(yr,{key:"close-window-confirmation"}):"IMPORT"===e?o.a.createElement(Mr,{key:"import"}):"KEYBINDINGS"===e?o.a.createElement(Yr,{key:"keybindings"}):"LOGOUT-CONFIRMATION"===e?o.a.createElement($r,{key:"logout-confirmation"}):"SETTINGS"===e?o.a.createElement(Ao,{key:"settings"}):"SHARE"===e?o.a.createElement(Vo,{key:"share"}):null)})))}}])&&Wo(t.prototype,n),a&&Wo(t,a),c}(r.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(qo,"displayName","DialogRenderer");var Zo={closeDialog:le.closeDialog},Jo=Object(a.b)((function(e){return{dialogs:e.ui.dialogs,theme:Object(se.a)(e)}}),Zo)(qo),Xo=n(141),ea=n(721);function ta(e){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function na(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oa(e,t){return(oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ua(e);if(t){var o=ua(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ia(this,n)}}function ia(e,t){return!t||"object"!==ta(t)&&"function"!=typeof t?ca(e):t}function ca(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ua(e){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function la(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oa(e,t)}(i,e);var t,n,r,a=aa(i);function i(){var e;na(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return la(ca(e=a.call.apply(a,[this].concat(n))),"handleShortcut",(function(t){if(e.props.hotkeysEnabled){var n=t.ctrlKey,r=t.metaKey,o=t.shiftKey,a=t.key.toLowerCase();return(n||r)&&n!==r&&o&&"u"===a?(e.props.toggleTagList(),t.stopPropagation(),t.preventDefault(),!1):("Escape"!==a&&"Esc"!==a||!e.props.isSearchActive||e.props.clearSearch(),window.electron&&hr.b||e.handleBrowserShortcut(t),!0)}})),la(ca(e),"handleBrowserShortcut",(function(t){var n=t.ctrlKey,r=t.metaKey,o=t.shiftKey,a=t.key.toLowerCase(),i=(n||r)&&n!==r;return i&&o&&"s"===a||i&&!o&&"f"===a?(e.props.focusSearchField(),t.stopPropagation(),t.preventDefault(),!1):i&&o&&"f"===a?(e.props.toggleFocusMode(),t.stopPropagation(),t.preventDefault(),!1):i&&o&&"i"===a?(e.props.createNote(),t.stopPropagation(),t.preventDefault(),!1):void(!i||"g"!==a&&"f"!==a||(t.stopPropagation(),t.preventDefault()))})),la(ca(e),"toggleShortcuts",(function(t){t?window.addEventListener("keydown",e.handleShortcut,!0):window.removeEventListener("keydown",e.handleShortcut,!0)})),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e;null===(e=window.electron)||void 0===e||e.send("setAutoHideMenuBar",this.props.autoHideMenuBar),this.toggleShortcuts(!0),Object(Xo.b)("application_opened")}},{key:"componentWillUnmount",value:function(){this.toggleShortcuts(!1)}},{key:"render",value:function(){var e=this.props,t=e.isDevConfig,n=e.lineLength,r=e.showNavigation,a=e.showNoteInfo,i=e.theme,c=$()("app","theme-".concat(i),{"is-line-length-full":"full"===n,"touch-enabled":"ontouchstart"in document.body}),u=$()("simplenote-app",{"note-info-open":a,"navigation-open":r,"is-electron":hr.a,"is-macos":hr.b});return o.a.createElement("div",{className:c},t&&o.a.createElement(fn,null),o.a.createElement("div",{className:u},r&&o.a.createElement(Fe,null),o.a.createElement(sn,null),a&&o.a.createElement(F,null)),o.a.createElement(Jo,{appProps:this.props}))}}])&&ra(t.prototype,n),r&&ra(t,r),i}(r.Component);la(sa,"displayName","App");var fa=Object(a.b)((function(e){return{autoHideMenuBar:e.settings.autoHideMenuBar,hotkeysEnabled:e.settings.keyboardShortcuts,isSearchActive:!!e.ui.searchQuery.length,isSmallScreen:se.b(e),lineLength:e.settings.lineLength,showNavigation:e.ui.showNavigation,showNoteInfo:e.ui.showNoteInfo,theme:se.a(e)}}),(function(e){return{activateTheme:function(t){return e(ea.activateTheme(t))},clearSearch:function(){return e(Object(le.search)(""))},closeNote:function(){return e(Object(le.closeNote)())},createNote:function(){return e(Object(le.createNote)())},focusSearchField:function(){return e(j.a.ui.focusSearchField())},setLineLength:function(t){return e(ea.setLineLength(t))},setNoteDisplay:function(t){return e(ea.setNoteDisplay(t))},setSortType:function(t){return e(ea.setSortType(t))},toggleAutoHideMenuBar:function(){return e(ea.toggleAutoHideMenuBar())},toggleFocusMode:function(){return e(ea.toggleFocusMode())},toggleSortOrder:function(){return e(ea.toggleSortOrder())},toggleSortTagsAlpha:function(){return e(ea.toggleSortTagsAlpha())},toggleSpellCheck:function(){return e(ea.toggleSpellCheck())},toggleTagList:function(){return e(Object(le.toggleNavigation)())}}}))(sa),da=n(39),pa=n.n(da),ma=n(559),ya=n(822),ha=n.n(ya);function va(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){Ea(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ta=!0,Sa=function(){Ta=!1},Na=function(){return new Promise((function(e,t){var n=indexedDB.open("simplenote_v2",2020065);n.onsuccess=function(){return e(n.result)},n.onerror=function(){return t()},n.onupgradeneeded=function(){var e=n.result;e.objectStoreNames.contains("state")||e.createObjectStore("state"),e.objectStoreNames.contains("revisions")||e.createObjectStore("revisions")},n.onblocked=function(){return t()}}))},_a=function(e){return Na().then((function(t){return new Promise((function(n){var r=!0,o=t.transaction(["state","revisions"],"readonly");t.onversionchange=function(){r=!1,n([{},ja])};var a=o.objectStore("state").get("state");a.onsuccess=function(){if(r){var t=a.result;if(t)try{var i;if(null!==e&&t.accountName!==e)return void n([{},ja]);var c=new Map(t.noteTags.map((function(e){var t=Oa(e,2),n=t[0],r=t[1];return[n,new Set(r)]}))),u={data:{analyticsAllowed:null!==(i=t.allowAnalytics)&&void 0!==i?i:null,notes:new Map(t.notes),noteTags:c,tags:new Map(t.tags)},settings:{accountName:t.accountName},simperium:{ghosts:[new Map(t.cvs),new Map(t.ghosts)],lastRemoteUpdate:new Map(t.lastRemoteUpdate),lastSync:new Map(t.lastSync)}};"preferences"in t?u.data.preferences=new Map(t.preferences):(u.simperium.ghosts[0].delete("preferences"),u.simperium.ghosts[1].delete("preferences"));var l=o.objectStore("revisions").openCursor(),s=new Map;l.onsuccess=function(){if(r){var e=l.result;e?(s.set(e.key,new Map(e.value)),e.continue()):n([ba(ba({},u),{},{data:ba(ba({},u.data),{},{noteRevisions:s})}),ja])}else n([u,ja])},l.onerror=function(){return n([u,ja])}}catch(e){n([{},ja])}else n([{},ja])}else n([{},ja])},a.onerror=function(){return n([{},ja])}}))})).catch((function(){return[{},null]}))},Aa=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na();case 2:r=e.sent.transaction("revisions","readwrite"),(o=r.objectStore("revisions").get(t)).onsuccess=function(){var e,a=o.result,i=null!==(e=null==a?void 0:a.slice())&&void 0!==e?e:[],c=new Set(i.map((function(e){return Oa(e,1)[0]})));n.forEach((function(e){var t=Oa(e,2),n=t[0],r=t[1];c.has(n)||(i.push([n,r]),c.add(n))})),i.sort((function(e,t){return e[0]-t[0]})),r.objectStore("revisions").put(i,t)},o.onerror=function(){r.objectStore("revisions").put(n,t)};case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){va(a,r,o,i,c,"next",e)}function c(e){va(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),ja=function(e){e.dispatch;var t=e.getState;return function(e){var n=null;return function(r){var o=e(r);return n&&clearTimeout(n),Ta&&(n=setTimeout((function(){return Ta&&function(e){var t=Array.from(e.data.notes),n=Array.from(e.data.noteTags).map((function(e){var t=Oa(e,2),n=t[0],r=t[1];return[n,Array.from(r)]})),r=Array.from(e.data.preferences),o=Array.from(e.data.tags),a=Array.from(e.simperium.ghosts[0]),i=Array.from(e.simperium.ghosts[1]),c=Array.from(e.simperium.lastRemoteUpdate),u=Array.from(e.simperium.lastSync),l={accountName:e.settings.accountName,allowAnalytics:e.data.analyticsAllowed,notes:t,noteTags:n,preferences:r,tags:o,cvs:a,ghosts:i,lastRemoteUpdate:c,lastSync:u};return Na().then((function(e){e.transaction("state","readwrite").objectStore("state").put(l,"state")}))}(t())}),1e3)),"LOAD_REVISIONS"===r.type&&r.revisions.length>0&&Aa(r.noteId,r.revisions),o}}},Ia=n(138);function Ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ra(Object(n),!0).forEach((function(t){Da(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ra(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ka=function(e){return function(t){return function(n){var r=e.getState();switch(n.type){case"CREATE_NOTE":var o,a,i,c,u,l,s=Object(Ia.v4)(),f=r.ui.filteredNotes[0],d=f&&r.data.notes.get(f),p=null==d?void 0:d.systemTags.includes("markdown"),m=null!==(o=null===(a=n.note)||void 0===a||null===(i=a.systemTags)||void 0===i?void 0:i.indexOf("markdown"))&&void 0!==o?o:-1,y=null!==(c=null===(u=n.note)||void 0===u||null===(l=u.systemTags)||void 0===l?void 0:l.slice())&&void 0!==c?c:[];return p&&-1===m?y.push("markdown"):!p&&m>=0&&y.splice(m,1),t({type:"CREATE_NOTE_WITH_ID",noteId:s,note:Ca(Ca({},n.note),{},{systemTags:y}),meta:{nextNoteToOpen:s}});case"DELETE_OPEN_NOTE_FOREVER":if(!r.ui.openedNote)return;return t({type:"DELETE_NOTE_FOREVER",noteId:r.ui.openedNote});case"EMPTY_TRASH":var h=t(n);return r.data.notes.forEach((function(t,n){t.deleted&&e.dispatch({type:"DELETE_NOTE_FOREVER",noteId:n})})),h;case"EXPORT_NOTES":return Zn(r.data.notes),t(n);case"IMPORT_NOTE":return t({type:"IMPORT_NOTE_WITH_ID",noteId:Object(Ia.v4)(),note:n.note});case"RESTORE_NOTE_REVISION":var v=r.data.noteRevisions.get(n.noteId).get(n.version);return t(v?Ca(Ca({},n),{},{note:v}):n);case"RESTORE_OPEN_NOTE":if(!r.ui.openedNote)return;return t({type:"RESTORE_NOTE",noteId:r.ui.openedNote});case"TOGGLE_ANALYTICS":return t({type:"SET_ANALYTICS",allowAnalytics:!r.data.analyticsAllowed});case"TRASH_OPEN_NOTE":if(!r.ui.openedNote)return;return t({type:"TRASH_NOTE",noteId:r.ui.openedNote});default:return t(n)}}}},La=n(208),Pa=n.n(La),Ma=Pa()("electron-middleware"),xa=function(e){var t=e.dispatch,n=e.getState;return window.electron.receive("appCommand",(function(e){switch(e.action){case"closeWindow":return void t(j.a.ui.closeWindow());case"emptyTrash":return void t(j.a.ui.emptyTrash());case"exportNotes":return void t(j.a.data.exportNotes());case"logout":return void t({type:"LOGOUT"});case"printNote":return void window.print();case"activateTheme":return void t(j.a.settings.activateTheme(e.theme));case"focusSearchField":return void t(j.a.ui.focusSearchField());case"showDialog":return void t(j.a.ui.showDialog(e.dialog));case"trashNote":return void t(j.a.ui.trashOpenNote());case"newNote":return void t(j.a.ui.createNote());case"setLineLength":return void t(j.a.settings.setLineLength(e.lineLength));case"setNoteDisplay":return void t(j.a.settings.setNoteDisplay(e.noteDisplay));case"setSortType":return void t(j.a.settings.setSortType(e.sortType));case"toggleFocusMode":return void t(j.a.settings.toggleFocusMode());case"toggleSortOrder":return void t(j.a.settings.toggleSortOrder());case"toggleSortTagsAlpha":return void t(j.a.settings.toggleSortTagsAlpha());case"toggleSpellCheck":return void t(j.a.settings.toggleSpellCheck());default:Ma("unknown AppCommand: ".concat(e))}})),window.electron.send("appStateUpdate",{settings:n().settings,editMode:n().ui.editMode}),function(e){return function(t){var r=n(),o=e(t),a=n();switch(t.type){case"REALLY_CLOSE_WINDOW":return window.electron.send("reallyCloseWindow"),o}return r.settings===a.settings&&r.ui.editMode===a.ui.editMode||window.electron.send("appStateUpdate",{settings:a.settings,editMode:a.ui.editMode}),o}}},Ga=n(728);function Ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ha(Object(n),!0).forEach((function(t){Ba(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ha(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ba(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Va=function(e){return function(t){return function(n){var r,o,a,i;switch(n.type){case"SELECT_NOTE_ABOVE":var c=e.getState().ui,u=c.filteredNotes,l=c.openedNote;if(0===u.length)return;if(!l)return t({type:"SELECT_NOTE",noteId:u[0]});var s=u.findIndex((function(e){return e===l}));if(0===s)return;return t({type:"SELECT_NOTE",noteId:-1===s?u[0]:u[s-1]});case"SELECT_NOTE_BELOW":var f=e.getState().ui,d=f.filteredNotes,p=f.openedNote;if(0===d.length)return;if(!p)return t({type:"SELECT_NOTE",noteId:d[0]});var m=d.findIndex((function(e){return e===p}));if(m===d.length-1)return;return t({type:"SELECT_NOTE",noteId:-1===m?d[0]:d[m+1]});case"SHOW_ALL_NOTES":case"SELECT_TRASH":return t(Ua(Ua({},n),{},{meta:Ua(Ua({},n.meta),{},{nextNoteToOpen:null!==(r=null===(o=n.meta)||void 0===o||null===(a=o.searchResults)||void 0===a?void 0:a.noteIds[0])&&void 0!==r?r:null})}));case"REQUEST_NOTIFICATIONS":if(n.sendNotifications&&"default"===(null===(i=window.Notification)||void 0===i?void 0:i.permission)){var y,h=function(){return e.dispatch({type:"REQUEST_NOTIFICATIONS",sendNotifications:!0})},v=null===(y=window.Notification)||void 0===y?void 0:y.requestPermission(h);"function"==typeof v.then&&v.then(h)}return t(n);default:return t(n)}}}},Fa=function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},za=function(){return window.innerWidth},Wa=Object(ma.c)({windowWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:za(),t=arguments.length>1?arguments[1]:void 0;return"WINDOW_RESIZE"===t.type?t.innerWidth:e},systemTheme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa(),t=arguments.length>1?arguments[1]:void 0;return"SYSTEM_THEME_UPDATE"===t.type?t.prefers:e}}),Ka=function(e){var t=e.dispatch;return window.addEventListener("resize",(function(){return t({type:"WINDOW_RESIZE",innerWidth:za()})})),window.matchMedia("(prefers-color-scheme: dark)").addListener((function(){return t({type:"SYSTEM_THEME_UPDATE",prefers:Fa()})})),function(e){return e}},Ya=n(573);function Qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||qa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $a(e){return function(e){if(Array.isArray(e))return Za(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||qa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qa(e,t){if(e){if("string"==typeof e)return Za(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Za(e,t):void 0}}function Za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){ei(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ti=function(e){return Xa(Xa({},e),{},{modificationDate:Date.now()/1e3})},ni=Object(ma.c)({analyticsAllowed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOTE_ANALYTICS_UPDATE":case"SET_ANALYTICS":return t.allowAnalytics;default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var n=e.get(t.noteId);if(!n)return e;var r="ADD_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName,o=Object(Ya.c)(n.tags,r);return o!==n.tags?new Map(e).set(t.noteId,ti(Xa(Xa({},n),{},{tags:o}))):e;case"CREATE_NOTE_WITH_ID":return new Map(e).set(t.noteId,Xa({content:"",creationDate:Date.now()/1e3,modificationDate:Date.now()/1e3,deleted:!1,publishURL:"",shareURL:"",systemTags:[],tags:[]},t.note));case"DELETE_NOTE_FOREVER":case"NOTE_BUCKET_REMOVE":case"REMOTE_NOTE_DELETE_FOREVER":if(!e.has(t.noteId))return e;var a=new Map(e);return a.delete(t.noteId),a;case"EDIT_NOTE":var i,c=null!==(i=e.get(t.noteId))&&void 0!==i?i:{content:"",creationDate:Date.now()/1e3,modificationDate:Date.now()/1e3,deleted:!1,publishURL:"",shareURL:"",systemTags:[],tags:[]};return new Map(e).set(t.noteId,ti(Xa(Xa({},c),t.changes)));case"NOTE_BUCKET_UPDATE":case"REMOTE_NOTE_UPDATE":return new Map(e).set(t.noteId,t.note);case"RESTORE_NOTE_REVISION":return t.note?new Map(e).set(t.noteId,t.note):e;case"IMPORT_NOTE_WITH_ID":return new Map(e).set(t.noteId,t.note);case"MARKDOWN_NOTE":if(!e.has(t.noteId))return e;var u=e.get(t.noteId),l=u.systemTags.includes("markdown");if(l===t.shouldEnableMarkdown)return e;var s=t.shouldEnableMarkdown?[].concat($a(u.systemTags),["markdown"]):u.systemTags.filter((function(e){return"markdown"!==e}));return new Map(e).set(t.noteId,ti(Xa(Xa({},u),{},{systemTags:s})));case"PIN_NOTE":if(!e.has(t.noteId))return e;var f=e.get(t.noteId),d=f.systemTags.includes("pinned");if(d===t.shouldPin)return e;var p=t.shouldPin?[].concat($a(f.systemTags),["pinned"]):f.systemTags.filter((function(e){return"pinned"!==e}));return new Map(e).set(t.noteId,ti(Xa(Xa({},f),{},{systemTags:p})));case"PUBLISH_NOTE":if(!e.has(t.noteId))return e;var m=e.get(t.noteId),y=m.systemTags.includes("published");if(y===t.shouldPublish)return e;var h=t.shouldPublish?[].concat($a(m.systemTags),["published"]):m.systemTags.filter((function(e){return"published"!==e}));return new Map(e).set(t.noteId,ti(Xa(Xa({},m),{},{systemTags:h})));case"REMOVE_COLLABORATOR":case"REMOVE_NOTE_TAG":var v=e.get(t.noteId);if(!v)return e;var g="REMOVE_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName,b=Object(Ya.d)(v.tags,g);return b!==v.tags?new Map(e).set(t.noteId,ti(Xa(Xa({},v),{},{tags:b}))):e;case"RENAME_TAG":var E=Object(Ya.a)(t.oldTagName),O=Object(Ya.a)(t.newTagName),w=new Map(e);return E===O||w.forEach((function(e,n){var r=[],o=new Set,a=!1;e.tags.forEach((function(e){var n=Object(Ya.a)(e);a=a||n===E||n===O,o.has(n)||(E!==n&&(o.add(n),r.push(e)),o.has(O)||(o.add(O),r.push(t.newTagName)))})),a&&w.set(n,ti(Xa(Xa({},e),{},{tags:r})))})),w;case"RESTORE_NOTE":return e.has(t.noteId)?new Map(e).set(t.noteId,ti(Xa(Xa({},e.get(t.noteId)),{},{deleted:!1}))):e;case"TRASH_NOTE":return e.has(t.noteId)?new Map(e).set(t.noteId,ti(Xa(Xa({},e.get(t.noteId)),{},{deleted:!0}))):e;case"TRASH_TAG":var T=new Map(e),S=!1;return T.forEach((function(e,n){var r=Object(Ya.d)(e.tags,t.tagName);r!==e.tags&&(S=!0,T.set(n,ti(Xa(Xa({},e),{},{tags:r}))))})),S?T:e;default:return e}},noteRevisions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_REVISIONS":var n,r=null!==(n=e.get(t.noteId))&&void 0!==n?n:new Map,o=new Map(r);return t.revisions.forEach((function(e){var t=Qa(e,2),n=t[0],r=t[1];return o.set(n,r)})),new Map(e).set(t.noteId,o);default:return e}},noteTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var n,r=Object(Ya.a)("ADD_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName);return new Map(e).set(r,(null!==(n=e.get(r))&&void 0!==n?n:new Set).add(t.noteId));case"EDIT_NOTE":case"IMPORT_NOTE_WITH_ID":var o="EDIT_NOTE"===t.type?t.changes.tags:t.note.tags;if(!(null==o?void 0:o.length))return e;var a=t.noteId,i=new Set(o.map(Ya.a)),c=new Map(e);return c.forEach((function(e,t){if(e.has(a)&&!i.has(t)){var n=new Set(e);return n.delete(a),void c.set(t,n)}!e.has(a)&&i.has(t)&&c.set(t,new Set(e).add(a))})),c;case"TAG_REFRESH":return t.noteTags;case"REMOTE_TAG_DELETE":case"TAG_BUCKET_REMOVE":var u=new Map(e);return u.delete(t.tagHash)?u:e;case"REMOVE_COLLABORATOR":case"REMOVE_NOTE_TAG":var l=Object(Ya.a)("REMOVE_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName),s=e.get(l);if(!s)return e;var f=new Set(s);return f.delete(t.noteId)?new Map(e).set(l,f):e;case"TRASH_TAG":var d=new Map(e);return d.delete(Object(Ya.a)(t.tagName))?d:e;default:return e}},preferences:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_ANALYTICS":return new Map(t).set("preferences-key",Xa(Xa({},null!==(e=t.get("preferences-key"))&&void 0!==e?e:{}),{},{analytics_enabled:n.allowAnalytics}));case"PREFERENCES_BUCKET_REMOVE":var r=new Map(t);return r.delete(n.id)?r:t;case"PREFERENCES_BUCKET_UPDATE":return new Map(t).set(n.id,n.data);default:return t}},tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var n="ADD_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName;return e.has(Object(Ya.a)(n))?e:new Map(e).set(Object(Ya.a)(n),{name:n});case"EDIT_NOTE":case"IMPORT_NOTE_WITH_ID":var r="EDIT_NOTE"===t.type?t.changes.tags:t.note.tags;if(!(null==r?void 0:r.length))return e;var o=new Map(e),a=!1;return r.forEach((function(t){var n=Object(Ya.a)(t);e.has(n)||(o.set(n,{name:t}),a=!0)})),a?o:e;case"REMOTE_TAG_DELETE":case"TAG_BUCKET_REMOVE":var i=new Map(e);return i.delete(t.tagHash)?i:e;case"REMOTE_TAG_UPDATE":case"TAG_BUCKET_UPDATE":return new Map(e).set(t.tagHash,t.tag);case"RENAME_TAG":var c,u=Object(Ya.a)(t.oldTagName),l=Object(Ya.a)(t.newTagName),s=new Map(e),f=null!==(c=e.get(u))&&void 0!==c?c:{};return s.set(l,Xa(Xa({},f),{},{name:t.newTagName})),u!==l&&s.delete(u),s;case"REORDER_TAG":var d=Object(Ya.a)(t.tagName),p=e.get(d);if(!p)return e;var m=new Map(e);return m.delete(d),$a(m.entries()).sort((function(e,t){return void 0!==e[1].index&&void 0!==t[1].index?e[1].index-t[1].index:void 0===e[1].index?1:-1})).forEach((function(e,n){var r=Qa(e,2),o=r[0],a=r[1];m.set(o,Xa(Xa({},a),{},{index:n<t.newIndex?n:n+1}))})),m.set(d,Xa(Xa({},p),{},{index:t.newIndex})),m;case"TAG_REFRESH":var y=new Map(e);return t.noteTags.forEach((function(e,t){y.has(t)||y.set(t,{name:Object(Ya.b)(t)})})),y;case"TRASH_TAG":var h=new Map(e);return h.delete(Object(Ya.a)(t.tagName))?h:e;default:return e}}}),ri=Object(ma.c)({accountName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setAccountName":return t.accountName;default:return e}},autoHideMenuBar:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setAutoHideMenuBar":return t.autoHideMenuBar;case"TOGGLE_AUTO_HIDE_MENU_BAR":return!e;default:return e}},focusModeEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setFocusMode":return t.focusModeEnabled;case"TOGGLE_FOCUS_MODE":return!e;default:return e}},keyboardShortcuts:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"KEYBOARD_SHORTCUTS_TOGGLE":return!e;default:return e}},lineLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"narrow",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setLineLength":return t.lineLength;default:return e}},markdownEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SYSTEM_TAG":return"markdown"===t.tagName?t.shouldHaveTag:e;default:return e}},noteDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"comfy",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNoteDisplay":return t.noteDisplay;default:return e}},sendNotifications:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"granted"===(null===(e=window.Notification)||void 0===e?void 0:e.permission),o=arguments.length>1?arguments[1]:void 0;switch(o.type){case"REQUEST_NOTIFICATIONS":return!!o.sendNotifications&&"granted"===(null===(t=window.Notification)||void 0===t?void 0:t.permission);default:return r&&"granted"===(null===(n=window.Notification)||void 0===n?void 0:n.permission)}},sortReversed:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSortReversed":return t.sortReversed;case"TOGGLE_SORT_ORDER":return!e;default:return e}},sortTagsAlpha:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSortTagsAlpha":return t.sortTagsAlpha;case"TOGGLE_SORT_TAGS_ALPHA":return!e;default:return e}},sortType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"modificationDate",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSortType":return t.sortType;default:return e}},spellCheckEnabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSpellCheck":return t.spellCheckEnabled;case"TOGGLE_SPELLCHECK":return!e;default:return e}},theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"system",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setTheme":return t.theme;default:return e}}});function oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ai(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ai(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ii=new Map,ci=Object(ma.c)({connectionStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.onLine?"red":"offline",t=arguments.length>1?arguments[1]:void 0;return"CHANGE_CONNECTION_STATUS"===t.type?t.status:e},ghosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Map,new Map],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GHOST_REMOVE_ENTITY":var n,r=oi(e,2),o=r[0],a=r[1],i=null!==(n=a.get(t.bucketName))&&void 0!==n?n:new Map,c=new Map(i);return c.delete(t.entityId),[o,new Map(a).set(t.bucketName,c)];case"GHOST_SET_CHANGE_VERSION":var u=oi(e,2),l=u[0],s=u[1],f=new Map(l).set(t.bucketName,t.version);return[f,s];case"GHOST_SET_ENTITY":var d,p=oi(e,2),m=p[0],y=p[1],h=null!==(d=y.get(t.bucketName))&&void 0!==d?d:new Map,v=new Map(h).set(t.entityId,t.ghost);return[m,new Map(y).set(t.bucketName,v)];default:return e}},lastSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ii,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACKNOWLEDGE_PENDING_CHANGE":return new Map(e).set(t.entityId,Date.now());case"REMOTE_NOTE_UPDATE":return new Map(e).set(t.noteId,Date.now());default:return e}},lastRemoteUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ii,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOTE_NOTE_UPDATE":return t.remoteInfo?new Map(e).set(t.noteId,Date.now()):e;default:return e}}}),ui=n(590);function li(e){return function(e){if(Array.isArray(e))return di(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||fi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||fi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fi(e,t){if(e){if("string"==typeof e)return di(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?di(e,t):void 0}}function di(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pi=[],mi=Object(ma.c)({dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLOSE_DIALOG":return e.slice(0,-1);case"SHOW_DIALOG":return e.includes(t.dialog)?e:[].concat(li(e),[t.dialog]);default:return e}},editMode:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_EDIT_MODE":return!e;case"CREATE_NOTE_WITH_ID":return!0;default:return e}},editorSelection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOTE_NOTE_UPDATE":var n,r,o;if("d"!==(null===(n=t.remoteInfo)||void 0===n||null===(r=n.patch)||void 0===r||null===(o=r.content)||void 0===o?void 0:o.o)||!e.has(t.noteId))return e;var a=e.get(t.noteId),i=si(a,3),c=i[0],u=i[1],l=i[2],s=t.remoteInfo.patch.content.v.split("\t"),f=t.remoteInfo.original.content,d=Object(ui.b)(Object(ui.a)(f).slice(0,c)).length,p=Object(ui.b)(Object(ui.a)(f).slice(0,u)).length,m=s.reduce((function(e,t){var n=si(e,3),r=n[0],o=n[1],a=n[2];if(a>r&&a>o)return e;var i=t[0],c=t.slice(1);switch(i){case"=":return[r,o,a+parseInt(c,10)];case"-":var u=parseInt(c,10);return[r>a?r-u:r,o>a?o-u:o,a];case"+":var l=decodeURIComponent(c).length;return[r>a?r+l:r,o>a?o+l:o,a];default:return e}}),[d,p,0]),y=si(m,2),h=y[0],v=y[1],g=Object(ui.a)(t.note.content.slice(0,h)).length,b=Object(ui.a)(t.note.content.slice(0,v)).length;return new Map(e).set(t.noteId,[g,b,l]);case"STORE_EDITOR_SELECTION":return new Map(e).set(t.noteId,[t.start,t.end,t.direction]);default:return e}},editingTags:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TAG_EDITING_TOGGLE":return!e;case"OPEN_NOTE":case"SELECT_NOTE":case"OPEN_TAG":case"SELECT_TRASH":case"SHOW_ALL_NOTES":case"NAVIGATION_TOGGLE":return!1;default:return e}},filteredNotes:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pi,n=arguments.length>1?arguments[1]:void 0;return void 0===(null===(e=n.meta)||void 0===e?void 0:e.searchResults)?t:n.meta.searchResults.noteIds},hasLoadedNotes:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTER_NOTES":return!0;default:return e}},openedNote:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"CLOSE_NOTE":return null;case"OPEN_NOTE":return null!==(e=null==r?void 0:r.noteId)&&void 0!==e?e:n;case"SELECT_NOTE":return r.noteId;default:return void 0!==(null===(t=r.meta)||void 0===t?void 0:t.nextNoteToOpen)?r.meta.nextNoteToOpen:n}},openedRevision:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLOSE_REVISION":case"RESTORE_NOTE_REVISION":return null;case"OPEN_REVISION":return[t.noteId,t.version];default:return e}},openedTag:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TRASH":case"SHOW_ALL_NOTES":return null;case"OPEN_TAG":return Object(Ya.a)(t.tagName);case"TRASH_TAG":return Object(Ya.a)(t.tagName)===e?null:e;default:return e}},searchQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NOTE_WITH_ID":return"";case"SEARCH":return t.searchQuery;default:return e}},showNavigation:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAVIGATION_TOGGLE":return!e;case"OPEN_TAG":case"SELECT_TRASH":case"SHOW_ALL_NOTES":return!1;case"SHOW_DIALOG":return"SETTINGS"!==t.dialog&&e;default:return e}},showNoteInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTE_INFO_TOGGLE":return!e;case"NAVIGATION_TOGGLE":case"SELECT_NOTE":return!1;default:return e}},showNoteList:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTE_LIST_TOGGLE":return!e;case"FOCUS_SEARCH_FIELD":return!0;case"OPEN_NOTE":return!1;default:return e}},showRevisions:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REVISIONS_TOGGLE":return!e;case"CLOSE_REVISION":case"OPEN_NOTE":case"SELECT_NOTE":case"CREATE_NOTE_WITH_ID":case"RESTORE_NOTE_REVISION":return!1;default:return e}},showTrash:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TRASH":return!0;case"CREATE_NOTE_WITH_ID":case"OPEN_TAG":case"SHOW_ALL_NOTES":return!1;default:return e}},simperiumConnected:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SIMPERIUM_CONNECTION_STATUS_TOGGLE"===t.type?t.simperiumConnected:e},tagSuggestions:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pi,n=arguments.length>1?arguments[1]:void 0;return void 0===(null===(e=n.meta)||void 0===e?void 0:e.searchResults)?t:n.meta.searchResults.tagHashes},unsyncedNoteIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pi,t=arguments.length>1?arguments[1]:void 0;return"SET_UNSYNCED_NOTE_IDS"===t.type?t.noteIds:e}});function yi(e){return function(e){if(Array.isArray(e))return Oi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ei(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(n),!0).forEach((function(t){gi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Ei(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ei(e,t){if(e){if("string"==typeof e)return Oi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oi(e,t):void 0}}function Oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wi=Object(ma.c)({browser:Wa,data:ni,settings:ri,simperium:ci,ui:mi}),Ti=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ma.d,Si=n(46),Ni=n(187),_i=n.n(Ni);function Ai(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||ji(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ji(e,t){if(e){if("string"==typeof e)return Ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ii(e,t):void 0}}function Ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Di=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ci(this,"log",void 0),Ci(this,"nextDeadline",Date.now()+1e3),Ci(this,"bucket",void 0),Ci(this,"queue",void 0),Ci(this,"runTimer",null),this.bucket=t,this.log=Pa()("bucket-queue:".concat(t.name)),this.queue=new Map,t.on("index",(function(){return n.schedule()})),window.addEventListener("online",(function(){return n.schedule()})),this.schedule()}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){var n,r=null!==(n=this.queue.get(e))&&void 0!==n?n:1/0,o=Math.min(t,r);this.nextDeadline=Math.min(this.nextDeadline,o),this.log('added "'.concat(e,'" with deadline ').concat(new Date(o))),this.queue.set(e,o),this.schedule()}},{key:"has",value:function(e){return this.queue.has(e)}},{key:"run",value:function(){this.process(),this.schedule()}},{key:"schedule",value:function(){var e=this;this.runTimer&&clearTimeout(this.runTimer),this.runTimer=setTimeout((function(){return e.run()}),this.bucket.isIndexing||!navigator.onLine?1e4:this.nextDeadline-Date.now())}},{key:"process",value:function(){var e=this;if(this.bucket.isIndexing)this.log("skipping processing run because bucket is indexing");else if(navigator.onLine){var t=this.getNextNote();null!==t&&(this.log("telling bucket to sync ".concat(t)),this.queue.delete(t),this.bucket.touch(t).then((function(){return e.log("sync'd ".concat(t))})))}else this.log("skipping processing run because browser is offline")}},{key:"getNextNote",value:function(){var e,t=Date.now(),n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ji(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(this.queue);try{for(n.s();!(e=n.n()).done;){var r=Ai(e.value,2),o=r[0];if(r[1]<=t)return o}}catch(e){n.e(e)}finally{n.f()}return null}}])&&Ri(t.prototype,n),r&&Ri(t,r),e}();function ki(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Pi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(e){return function(e){if(Array.isArray(e))return Mi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Pi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(e,t){if(e){if("string"==typeof e)return Mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mi(e,t):void 0}}function Mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Gi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"store",void 0),this.store=t}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t){t(null,{id:e,data:this.store.getState().data.notes.get(e)})}},{key:"find",value:function(e,t){t(null,Li(this.store.getState().data.notes.entries()).map((function(e){var t=ki(e,2);return{id:t[0],data:t[1]}})))}},{key:"remove",value:function(e,t){this.store.dispatch({type:"NOTE_BUCKET_REMOVE",noteId:e}),t(null)}},{key:"update",value:function(e,t,n,r){this.store.dispatch({type:"NOTE_BUCKET_UPDATE",noteId:e,note:t,isIndexing:n}),r(null,{id:e,data:t})}}])&&xi(t.prototype,n),r&&xi(t,r),e}();function Hi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Bi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ui(e){return function(e){if(Array.isArray(e))return Vi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Bi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bi(e,t){if(e){if("string"==typeof e)return Vi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vi(e,t):void 0}}function Vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var zi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"store",void 0),this.store=t}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t){t(null,{id:e,data:this.store.getState().data.preferences.get(e)})}},{key:"find",value:function(e,t){t(null,Ui(this.store.getState().data.preferences.entries()).map((function(e){var t=Hi(e,2);return{id:t[0],data:t[1]}})))}},{key:"remove",value:function(e,t){this.store.dispatch({type:"PREFERENCES_BUCKET_REMOVE",id:e}),t(null)}},{key:"update",value:function(e,t,n,r){this.store.dispatch({type:"PREFERENCES_BUCKET_UPDATE",id:e,data:t,isIndexing:n}),r(null,{id:e,data:t})}}])&&Fi(t.prototype,n),r&&Fi(t,r),e}();function Wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ki(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yi=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ki(this,"bucketName",void 0),Ki(this,"store",void 0),this.bucketName=t,this.store=n}var t,n,r;return t=e,(n=[{key:"getChangeVersion",value:function(){var e=this.store.getState().simperium.ghosts[0].get(this.bucketName);return Promise.resolve(e)}},{key:"setChangeVersion",value:function(e){return this.store.dispatch({type:"GHOST_SET_CHANGE_VERSION",bucketName:this.bucketName,version:e}),Promise.resolve()}},{key:"get",value:function(e){var t=this.store.getState().simperium.ghosts[1].get(this.bucketName),n=null==t?void 0:t.get(e);return Promise.resolve(null!=n?n:{key:e,data:{}})}},{key:"put",value:function(e,t,n){var r={key:e,data:n,version:t};return this.store.dispatch({type:"GHOST_SET_ENTITY",bucketName:this.bucketName,entityId:e,ghost:r}),Promise.resolve(r)}},{key:"remove",value:function(e){var t=this.store.getState().simperium.ghosts[1].get(this.bucketName),n=null==t?void 0:t.get(e);return this.store.dispatch({type:"GHOST_REMOVE_ENTITY",bucketName:this.bucketName,entityId:e}),Promise.resolve(n)}},{key:"eachGhost",value:function(e){var t;(null!==(t=this.store.getState().simperium.ghosts[1].get(this.bucketName))&&void 0!==t?t:new Map).forEach((function(t){return e(t)}))}}])&&Wi(t.prototype,n),r&&Wi(t,r),e}();function Qi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||qi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $i(e){return function(e){if(Array.isArray(e))return Zi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||qi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qi(e,t){if(e){if("string"==typeof e)return Zi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zi(e,t):void 0}}function Zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Xi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"store",void 0),this.store=t}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t){t(null,{id:e,data:this.store.getState().data.tags.get(e)})}},{key:"find",value:function(e,t){t(null,$i(this.store.getState().data.tags.entries()).map((function(e){var t=Qi(e,2);return{id:t[0],data:t[1]}})))}},{key:"remove",value:function(e,t){this.store.dispatch({type:"TAG_BUCKET_REMOVE",tagHash:e}),t(null)}},{key:"update",value:function(e,t,n,r){this.store.dispatch({type:"TAG_BUCKET_UPDATE",tagHash:e,tag:t,isIndexing:n}),r(null,{id:e,data:t})}}])&&Ji(t.prototype,n),r&&Ji(t,r),e}();function ec(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nc=Pa()("simperium-middleware"),rc=function(e,t,r,o){return function(r){var a=r.dispatch,i=r.getState,c=_i()("chalk-bump-f49",t,{objectStoreProvider:function(e){switch(e.name){case"note":return new Gi(r);case"preferences":return new zi(r);case"tag":return new Xi(r)}},ghostStoreProvider:function(e){return new Yi(e.name,r)}});c.on("unauthorized",(function(){return e()})),function(e){return new Promise((function(t){e.on("message",(function n(r){if(r.startsWith("0:auth:")){var o=ec(r.split("0:auth:"),2),a=(o[0],o[1]);e.off("message",n),t(a)}}))}))}(c).then((function(e){nc("authenticated: ".concat(e)),a(j.a.settings.setAccountName(e))})),function(e,t){var n=t.dispatch,r=t.getState,o=-1/0;e.on("message",(function(){o=Date.now(),"green"!==r().simperium.connectionStatus&&n({type:"CHANGE_CONNECTION_STATUS",status:"green"})})),setInterval((function(){var e=Date.now()-o,t=r().simperium.connectionStatus;e>8e3&&"green"===t&&n({type:"CHANGE_CONNECTION_STATUS",status:"red"})}),1e3),window.addEventListener("online",(function(){"offline"===r().simperium.connectionStatus&&n({type:"CHANGE_CONNECTION_STATUS",status:"red"})})),window.addEventListener("offline",(function(){n({type:"CHANGE_CONNECTION_STATUS",status:"offline"})})),e.on("disconnect",(function(){n({type:"CHANGE_CONNECTION_STATUS",status:navigator.onLine?"red":"offline"})}))}(c,r),hr.a||function(e){window.addEventListener("beforeunload",(function(t){if(0!==In(e.getState()).notes.length){t.preventDefault();var n="There are unsynchronized changes - do you want to logout and lose those changes?";return t.returnValue=n,n}}))}(r);var u=c.bucket("note");u.channel.on("update",(function(e,t,n,r,o){a(n&&r&&void 0!==o?{type:"REMOTE_NOTE_UPDATE",noteId:e,note:t,remoteInfo:{original:n,patch:r,isIndexing:o}}:{type:"REMOTE_NOTE_UPDATE",noteId:e,note:t})})),u.channel.on("remove",(function(e){return a({type:"REMOTE_NOTE_DELETE_FOREVER",noteId:e})})),"Notification"in window&&n.e(3).then(n.bind(null,1201)).then((function(e){var t=e.announceNoteUpdates;return u.channel.on("update",t(r))})),u.channel.localQueue.on("send",(function(e){a({type:"SUBMIT_PENDING_CHANGE",entityId:e.id,ccid:e.ccid})})),u.channel.on("acknowledge",(function(e,t){a({type:"ACKNOWLEDGE_PENDING_CHANGE",entityId:e,ccid:t.ccid})}));var l=c.bucket("tag");l.channel.on("update",(function(e,t,n,r,o){a(n&&r&&void 0!==o?{type:"REMOTE_TAG_UPDATE",tagHash:e,tag:t,remoteInfo:{original:n,patch:r,isIndexing:o}}:{type:"REMOTE_TAG_UPDATE",tagHash:e,tag:t})})),l.channel.on("remove",(function(e){return a({type:"REMOTE_TAG_DELETE",tagHash:e})}));var s=c.bucket("preferences");s.channel.on("update",(function(e,t){"preferences-key"===e&&!!t.analytics_enabled!==i().data.analyticsAllowed&&a({type:"REMOTE_ANALYTICS_UPDATE",allowAnalytics:!!t.analytics_enabled})})),o&&n.e(21).then(n.bind(null,1202)).then((function(e){var t=e.content,n=Date.now()/1e3;u.add({content:t,deleted:!1,systemTags:[],creationDate:n,modificationDate:n,shareURL:"",publishURL:"",tags:[]})}));var f=new Di(u),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return f.add(e,Date.now()+t)},p=new Set,m=new Di(l),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return m.add(e,Date.now()+t)},h=new Di(s);return window.addEventListener("storage",(function(t){"simplenote_logout"===t.key&&(Sa(),c.end(),e())})),function(t){return function(n){var o=r.getState(),s=t(n),m=r.getState();switch(n.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var v=Object(Ya.a)("ADD_COLLABORATOR"===n.type?n.collaboratorAccount:n.tagName);return o.data.tags.has(v)||y(v),d(n.noteId),s;case"REMOVE_COLLABORATOR":case"REMOVE_NOTE_TAG":return d(n.noteId),s;case"CREATE_NOTE_WITH_ID":case"INSERT_TASK_INTO_NOTE":case"EDIT_NOTE":return d(n.noteId),s;case"FILTER_NOTES":case"OPEN_NOTE":case"SELECT_NOTE":var g,b,E,O,w=null!==(g=null!==(b=n.noteId)&&void 0!==b?b:null===(E=n.meta)||void 0===E?void 0:E.nextNoteToOpen)&&void 0!==g?g:i().ui.openedNote;return!w||(null===(O=m.data.noteRevisions.get(w))||void 0===O?void 0:O.size)||p.has(w)||(p.add(w),setTimeout((function(){i().ui.openedNote===w&&u.getRevisions(w).then((function(e){a({type:"LOAD_REVISIONS",noteId:w,revisions:e.map((function(e){var t=e.data;return[e.version,t]})).sort((function(e,t){return e[0]-t[0]}))})}))}),250)),s;case"REVISIONS_TOGGLE":var T=m.ui.showRevisions,S=m.ui.openedNote;return S&&T&&u.getRevisions(S).then((function(e){a({type:"LOAD_REVISIONS",noteId:S,revisions:e.map((function(e){var t=e.data;return[e.version,t]})).sort((function(e,t){return e[0]-t[0]}))})})),s;case"IMPORT_NOTE_WITH_ID":case"MARKDOWN_NOTE":case"PIN_NOTE":case"PUBLISH_NOTE":case"RESTORE_NOTE":case"RESTORE_NOTE_REVISION":case"TRASH_NOTE":return d(n.noteId,10),s;case"DELETE_NOTE_FOREVER":return setTimeout((function(){return u.remove(n.noteId)}),10),s;case"RENAME_TAG":var N=Object(Ya.a)(n.oldTagName),_=Object(Ya.a)(n.newTagName);return _!==N&&setTimeout((function(){return l.remove(N)}),10),m.data.notes.forEach((function(e,t){o.data.notes.get(t)!==e&&d(t)})),y(_),s;case"REORDER_TAG":return m.data.tags.forEach((function(e,t){y(t)})),s;case"SET_ANALYTICS":return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;h.add(e,Date.now()+t)}("preferences-key"),s;case"TRASH_TAG":return l.remove(Object(Ya.a)(n.tagName)),m.data.notes.forEach((function(e,t){o.data.notes.get(t)!==e&&d(t)})),s;case"CLOSE_WINDOW":var A=In(m);return A.notes.forEach((function(e){return f.add(e,Date.now())})),A.notes.length>0?(r.dispatch({type:"SHOW_DIALOG",dialog:"CLOSE-WINDOW-CONFIRMATION"}),s):(r.dispatch({type:"REALLY_CLOSE_WINDOW"}),s);case"LOGOUT":var j=In(m);return j.notes.forEach((function(e){return f.add(e,Date.now())})),j.notes.length>0?(r.dispatch({type:"SHOW_DIALOG",dialog:"LOGOUT-CONFIRMATION"}),s):(Sa(),localStorage.setItem("simplenote_logout",Math.random().toString()),c.end(),e(),s);case"REALLY_LOGOUT":return Sa(),localStorage.setItem("simplenote_logout",Math.random().toString()),c.end(),e(),s}return s}}}},oc=(n(139),n(192));var ac=pa()(),ic=function(e,t,n,r){pn.a.setAppElement("#root"),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _a(e).then((function(t){var r,o,a=bi(t,2),i=a[0],u=a[1];return Object(ma.e)(wi,vi(vi({},i),{},{settings:vi(vi({},i.settings),{},{accountName:null!==(r=null===(o=i.settings)||void 0===o?void 0:o.accountName)&&void 0!==r?r:e})}),Ti(ha()("settings",{key:"simpleNote",slicer:function(e){return function(t){return gi({},e,Object(c.omit)(t[e],["allowNotifications","focusModeEnabled"]))}}}),ma.a.apply(void 0,[ka,Xo.a,Ka,Ga.a,jt,Va].concat(yi(hr.a?[xa]:[]),n,yi(u?[u]:[])))))}))}(n,rc(e,t,0,r)).then((function(e){var t;Object.defineProperties(window,{dispatch:{get:function(){return e.dispatch}},state:{get:function(){return e.getState()}}}),null===(t=window.electron)||void 0===t||t.send("appStateUpdate",{settings:e.getState().settings,editMode:e.getState().ui.editMode}),Object(Si.render)(o.a.createElement(a.a,{store:e},o.a.createElement(fa,{isDevConfig:Object(oc.a)(null==ac?void 0:ac.development)})),document.getElementById("root"))}))}},500:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"withEvent",(function(){return d})),n.d(r,"recordEvent",(function(){return p}));var o={};n.r(o),n.d(o,"addCollaborator",(function(){return m})),n.d(o,"editNote",(function(){return y})),n.d(o,"exportNotes",(function(){return h})),n.d(o,"importNote",(function(){return v})),n.d(o,"markdownNote",(function(){return g})),n.d(o,"pinNote",(function(){return b})),n.d(o,"publishNote",(function(){return E})),n.d(o,"removeCollaborator",(function(){return O})),n.d(o,"toggleAnalytics",(function(){return w}));var a={};n.r(a),n.d(a,"reallyCloseWindow",(function(){return T}));var i={};function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(i),n.d(i,"remoteNoteUpdate",(function(){return N}));var d=function(e,t){return function(n){var r,o;return s(s({},n),{},{meta:s(s({},n.meta),{},{analytics:[].concat(c(null!==(r=null===(o=n.meta)||void 0===o?void 0:o.analytics)&&void 0!==r?r:[]),[[e,t]])})})}},p=function(e,t){return d(e,t)({type:"RECORD_EVENT"})},m=function(e,t){return{type:"ADD_COLLABORATOR",noteId:e,collaboratorAccount:t}},y=function(e,t){return{type:"EDIT_NOTE",noteId:e,changes:t}},h=function(){return{type:"EXPORT_NOTES"}},v=function(e){return{type:"IMPORT_NOTE",note:e}},g=function(e,t){return{type:"MARKDOWN_NOTE",noteId:e,shouldEnableMarkdown:t}},b=function(e,t){return{type:"PIN_NOTE",noteId:e,shouldPin:t}},E=function(e,t){return{type:"PUBLISH_NOTE",noteId:e,shouldPublish:t}},O=function(e,t){return{type:"REMOVE_COLLABORATOR",noteId:e,collaboratorAccount:t}},w=function(){return{type:"TOGGLE_ANALYTICS"}},T=function(){return{type:"REALLY_CLOSE_WINDOW"}},S=n(721),N=function(e,t){return{type:"REMOTE_NOTE_UPDATE",noteId:e,note:t}},_=n(515);t.a={analytics:r,data:o,electron:a,simperium:i,settings:S,ui:_}},515:function(e,t,n){"use strict";n.r(t),n.d(t,"closeDialog",(function(){return r})),n.d(t,"closeNote",(function(){return o})),n.d(t,"closeWindow",(function(){return a})),n.d(t,"createNote",(function(){return i})),n.d(t,"deleteOpenNoteForever",(function(){return c})),n.d(t,"emptyTrash",(function(){return u})),n.d(t,"filterNotes",(function(){return l})),n.d(t,"focusSearchField",(function(){return s})),n.d(t,"logout",(function(){return f})),n.d(t,"openNote",(function(){return d})),n.d(t,"openTag",(function(){return p})),n.d(t,"reallyLogOut",(function(){return m})),n.d(t,"restoreOpenNote",(function(){return y})),n.d(t,"selectNoteAbove",(function(){return h})),n.d(t,"selectNoteBelow",(function(){return v})),n.d(t,"selectTrash",(function(){return g})),n.d(t,"showAllNotes",(function(){return b})),n.d(t,"showDialog",(function(){return E})),n.d(t,"storeRevisions",(function(){return O})),n.d(t,"toggleRevisions",(function(){return w})),n.d(t,"search",(function(){return T})),n.d(t,"selectNote",(function(){return S})),n.d(t,"toggleEditMode",(function(){return N})),n.d(t,"toggleNavigation",(function(){return _})),n.d(t,"toggleNoteList",(function(){return A})),n.d(t,"toggleNoteInfo",(function(){return j})),n.d(t,"toggleTagDrawer",(function(){return I})),n.d(t,"toggleTagEditing",(function(){return R})),n.d(t,"trashOpenNote",(function(){return C}));var r=function(){return{type:"CLOSE_DIALOG"}},o=function(){return{type:"CLOSE_NOTE"}},a=function(){return{type:"CLOSE_WINDOW"}},i=function(e){return{type:"CREATE_NOTE",note:e}},c=function(){return{type:"DELETE_OPEN_NOTE_FOREVER"}},u=function(){return{type:"EMPTY_TRASH"}},l=function(e,t){return{type:"FILTER_NOTES",noteIds:e,tagHashes:t}},s=function(){return{type:"FOCUS_SEARCH_FIELD"}},f=function(){return{type:"LOGOUT"}},d=function(e){return{type:"OPEN_NOTE",noteId:e}},p=function(e){return{type:"OPEN_TAG",tagName:e}},m=function(){return{type:"REALLY_LOGOUT"}},y=function(){return{type:"RESTORE_OPEN_NOTE"}},h=function(){return{type:"SELECT_NOTE_ABOVE"}},v=function(){return{type:"SELECT_NOTE_BELOW"}},g=function(){return{type:"SELECT_TRASH"}},b=function(){return{type:"SHOW_ALL_NOTES"}},E=function(e){return{type:"SHOW_DIALOG",dialog:e}},O=function(e,t){return{type:"STORE_REVISIONS",noteId:e,revisions:t}},w=function(){return{type:"REVISIONS_TOGGLE"}},T=function(e){return{type:"SEARCH",searchQuery:e}},S=function(e){return{type:"SELECT_NOTE",noteId:e}},N=function(){return{type:"TOGGLE_EDIT_MODE"}},_=function(){return{type:"NAVIGATION_TOGGLE"}},A=function(){return{type:"NOTE_LIST_TOGGLE"}},j=function(){return{type:"NOTE_INFO_TOGGLE"}},I=function(e){return{type:"TAG_DRAWER_TOGGLE",show:e}},R=function(){return{type:"TAG_EDITING_TOGGLE"}},C=function(){return{type:"TRASH_OPEN_NOTE"}}},537:function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t=e.children,n=e.headingLevel,o=void 0===n?3:n;return Object(r.createElement)("h".concat(o),{className:"panel-title theme-color-fg-dim"},t)}},538:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i}));var r=function(e){return e.browser.windowWidth<=750},o=function(e){return"system"===e.settings.theme?e.browser.systemTheme:e.settings.theme},a=function(e,t){return!!(e&&t&&e.content===t.content&&e.creationDate===t.creationDate&&e.modificationDate===t.modificationDate&&!!e.deleted==!!t.deleted&&e.publishURL===t.publishURL&&e.shareURL===t.shareURL&&e.tags.length===t.tags.length&&e.systemTags.length===t.systemTags.length&&e.tags.every((function(e){return t.tags.includes(e)}))&&e.systemTags.every((function(e){return t.systemTags.includes(e)})))},i=function(e,t){var n,r;return!a(e.data.notes.get(t),null===(n=e.simperium.ghosts[1].get("note"))||void 0===n||null===(r=n.get(t))||void 0===r?void 0:r.data)}},549:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var a=function(e){return e.replace(/(?:\btag:)([^\s,]+)/g,"").trim()},i=function(e){if(!e)return[];for(var t,n=/(?:")((?:"|[^"])+)(?:")/g,o="",i=a(e),c=[];null!==(t=n.exec(i));)c.push(t[0].slice(1,-1)),o+=i.slice(n.lastIndex,t.index);(n.lastIndex>0||0===c.length)&&n.lastIndex<i.length&&(o+=i.slice(n.lastIndex));var u=o.split(/[\b\s]/g).map((function(e){return e.trim()})).filter((function(e){return e}));return[].concat(c,r(u))}},572:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d}));var r=n(802),o=n.n(r),a=n(33),i=n(549);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e){var t=new RegExp("\\s*([^\n]{1,".concat(64,"})"),"g").exec(e);return t?c(t,2)[1]:"New Note…"},s=function(e,t){return e?(n=t,o()(n.replace(/(\s)\s+/g,"$1"),{stripListLeaders:!1})||t):t;var n},f=new Map,d=function(e,t){var n=function(e){return e.systemTags.includes("markdown")}(e),r=f.get(e.content);if(r){var o=c(r,3),u=o[0],d=o[1],p=o[2];if(d===n&&p===t)return u}var m=e.content||"",y={title:s(n,l(m)),preview:s(n,function(e,t){var n,r="",o=0;if(null==t?void 0:t.trim()){var c=Object(i.a)(t);if(c.length>0){var u=c[0].toLocaleLowerCase(),l=30-u.length,s=new RegExp("(?:\\s|^)[^\n]{0,"+l+"}"+Object(a.escapeRegExp)(u)+".{0,200}(?=\\s|$)","ims").exec(e);if(s&&s.length>0)return r=s[0],56320<=(n=r.charCodeAt(0))&&n<=57343?r.slice(1):r}}var f=e.indexOf("\n");if(-1===f)return"";for(;f>-1&&o<4;){var d=e.indexOf("\n",f);if(-1===d)return r+e.slice(f).trim();var p=e.slice(f,d).trim();p&&(r+=p+"\n",o++),f=d+1}return r.trim()}(m,t))};return f.set(e.content,[y,n,t]),y};t.a=d},573:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l}));var i=function(e){var t=e.normalize("NFC").toLocaleLowerCase("en-US");return encodeURIComponent(t).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))},c=function(e){return decodeURIComponent(e)},u=function(e,t){var n=i(t);return e.findIndex((function(e){return i(e)===n}))>-1?e:[].concat(r(e),[t])},l=function(e,t){var n,r=i(t),a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}(e);try{for(a.s();!(n=a.n()).done;){var c=n.value;if(i(c)===r)return e.filter((function(e){return i(e)!==r}))}}catch(e){a.e(e)}finally{a.f()}return e}},590:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(e){return e.replace(/^(\s*(?:[-+*\u2022]\s)?)- \[( |x|X)\](\s)/gm,(function(e,t,n,r){return t+(" "===n?"":"")+r}))},o=function(e){return e.replace(/\ue000|\ue001/g,(function(e){return""===e?"- [ ]":"- [x]"}))}},610:function(e,t,n){"use strict";var r=/^(?:[^@]+)@(?:.+)(?:\.[^.]{2,})$/;t.a=function(e){return r.test(e)}},649:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1268);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.a=function(e){var t=e.icon,n=e.title,r=c(e,["icon","title"]);return o.a.createElement(a.a,{classes:{tooltip:"icon-button__tooltip"},enterDelay:200,title:n},o.a.createElement("span",null,o.a.createElement("button",i({className:"icon-button",type:"button","data-title":n},r),t)))}},650:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=n.n(r);function a(){return o.a.createElement("svg",{className:"logo",width:"96",height:"96",viewBox:"0 0 176 176"},o.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},o.a.createElement("path",{d:"M152.37 87.885c0-34.066-27.182-63.42-59.45-64.854-6.416-.284-12.647 1.432-17.58 5.573-5.002 4.196-8.07 10.09-8.638 16.595C65.43 59.73 78.537 68.618 91.225 72.09c30.69 8.398 48.462 30.086 46.655 56.757 9.057-11.194 14.49-25.442 14.49-40.962zM84.345 97.24c-28.696-7.853-45.817-29.174-43.62-54.317.027-.287.073-.567.102-.852C29.19 53.846 22 70.023 22 87.886c0 34.348 27.955 63.828 60.277 64.933 7.227.248 14.214-1.685 19.766-6.344 5.67-4.757 9.146-11.435 9.79-18.808 1.703-19.463-16.492-27.417-27.488-30.426z",fill:"#4895d9"})))}},651:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1198);t.a=function(e){var t=e.children,n=e.shouldMount,r=e.wrapperClassName,i=void 0===r?"":r;return o.a.createElement(a.a,{in:n,classNames:"transition-fade-in-out",mountOnEnter:!0,timeout:200,unmountOnExit:!0},o.a.createElement("div",{className:i},t))}},721:function(e,t,n){"use strict";n.r(t),n.d(t,"activateTheme",(function(){return r})),n.d(t,"setNoteDisplay",(function(){return o})),n.d(t,"setLineLength",(function(){return a})),n.d(t,"toggleKeyboardShortcuts",(function(){return i})),n.d(t,"toggleSortOrder",(function(){return c})),n.d(t,"setSortType",(function(){return u})),n.d(t,"toggleSortTagsAlpha",(function(){return l})),n.d(t,"setAccountName",(function(){return s})),n.d(t,"toggleFocusMode",(function(){return f})),n.d(t,"toggleSpellCheck",(function(){return d})),n.d(t,"toggleAutoHideMenuBar",(function(){return p}));var r=function(e){return{type:"setTheme",theme:e}},o=function(e){return{type:"setNoteDisplay",noteDisplay:e}},a=function(e){return{type:"setLineLength",lineLength:e}},i=function(){return{type:"KEYBOARD_SHORTCUTS_TOGGLE"}},c=function(){return{type:"TOGGLE_SORT_ORDER"}},u=function(e){return{type:"setSortType",sortType:e}},l=function(){return{type:"TOGGLE_SORT_TAGS_ALPHA"}},s=function(e){return{type:"setAccountName",accountName:e}},f=function(){return{type:"TOGGLE_FOCUS_MODE"}},d=function(){return{type:"TOGGLE_SPELLCHECK"}},p=function(){return{type:"TOGGLE_AUTO_HIDE_MENU_BAR"}}},728:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return b}));var r=n(729),o=n(549),a=n(573),i=n(572);function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function u(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=[],h=function(e){var t,n,r,o,i,c,u,l,s,f;return{content:null!==(t=null===(n=e.content)||void 0===n?void 0:n.toLocaleLowerCase())&&void 0!==t?t:"",casedContent:null!==(r=e.content)&&void 0!==r?r:"",tags:new Set(null!==(o=null===(i=e.tags)||void 0===i?void 0:i.map(a.a))&&void 0!==o?o:[]),creationDate:null!==(c=e.creationDate)&&void 0!==c?c:Date.now()/1e3,modificationDate:null!==(u=e.modificationDate)&&void 0!==u?u:Date.now()/1e3,isPinned:null!==(l=null===(s=e.systemTags)||void 0===s?void 0:s.includes("pinned"))&&void 0!==l&&l,isTrashed:null!==(f=!!e.deleted)&&void 0!==f&&f}},v=function(e){for(var t,n=/(?:\btag:)([^\s,]+)/g,r=new Set;null!==(t=n.exec(e));)r.add(Object(a.a)(t[1]));return r},g=function(){return[]},b=function(e){var t={excludeIDs:[],hasSelectedFirstNote:!1,notes:new Map,openedTag:null,searchQuery:"",searchTags:new Set,searchTerms:[],showTrash:!1,sortType:e.getState().settings.sortType,sortReversed:e.getState().settings.sortReversed,titleOnly:!1},n=[],l=[],f=[],p=function(e){var r=function(e){return function(n,r){var o=t.notes.get(n),a=t.notes.get(r);if(!o||!a)return n.localeCompare(r);if(o.isPinned!==a.isPinned)return o.isPinned?-1:1;var i=e(o,a);return 0!==i?i:n.localeCompare(r)}},o=r((function(e,t){return e.casedContent.localeCompare(t.casedContent)})),a=r((function(e,t){return t.creationDate-e.creationDate})),i=r((function(e,t){return t.modificationDate-e.modificationDate}));[[n,o],[l,a],[f,i]].forEach((function(t){var n=d(t,2),r=n[0],o=n[1],a=r.indexOf(e);a>-1&&r.splice(a,1);var i=function e(t,n,r,o,a){if(o>=a)return o;var i=Math.floor((o+a)/2),c=r(n,t[i]);return c<0?e(t,n,r,o,i):c>0?e(t,n,r,i+1,a):i}(r,e,o,0,r.length);r.splice(i,0,e)}))};var m=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,a=s(s({},t),r),d=a.excludeIDs,p=a.notes,m=a.openedTag,y=a.searchTags,h=a.searchTerms,v=a.sortReversed,g=a.sortType,b=a.showTrash,E=a.titleOnly,O=new Set,w=new Set,T=e.getState().data.notes,S="alphabetical"===g?n:"creationDate"===g?l:f,N=function(e){var t=S[v?S.length-e-1:e];if(null==d?void 0:d.includes(t))return"continue";var n=p.get(t);if(!n||!T.has(t))return"continue";if(b!==n.isTrashed)return"continue";var r,o=!0,a=c(y.values());try{for(a.s();!(r=a.n()).done;){var u=r.value;if(!n.tags.has(u)){o=!1;break}}}catch(e){a.e(e)}finally{a.f()}if(!o)return"continue";if(m&&!n.tags.has(m))return"continue";var l=E?Object(i.b)(n.content):n.content;if(h.length>0&&!h.every((function(e){return l.includes(e.toLocaleLowerCase())})))return"continue";n.isPinned?w.add(t):O.add(t)},_=0;_<S.length&&w.size+O.size<=o;_++)N(_);return[].concat(u(w.values()),u(O.values()))};g=function(t,n){return m(t,n).map((function(t){return[t,e.getState().data.notes.get(t)]}))};var b=function(n){var o=e.getState().data,a=t.searchQuery,i=Object(r.b)(o.tags,o.noteTags,a);return{noteIds:n,tagHashes:i.length>0?i:y}},E=function(e){return s(s({},e),{},{meta:s(s({},e.meta),{},{searchResults:b(m())})})},O=function(t,n){var r,o,a,i=e.getState().ui,c=i.filteredNotes,u=i.openedNote;if(!u||u!==t)return n;var l=c.findIndex((function(e){return e===u})),f=-1===l?null!==(r=c[0])&&void 0!==r?r:null:null!==(o=null!==(a=c[l+1])&&void 0!==a?a:c[l-1])&&void 0!==o?o:null;return s(s({},n),{},{meta:s(s({},n.meta),{},{nextNoteToOpen:f})})},w=null,T=function(){clearTimeout(w),w=setTimeout((function(){var t=b(m());e.dispatch(s(s({type:"FILTER_NOTES"},t),{},{meta:{searchResults:t}}))}),30)};return e.getState().data.notes.forEach((function(e,n){t.notes.set(n,h(e)),p(n)})),T(),function(e){return function(r){var i,c,u=function(n){var r,o,a;return!t.hasSelectedFirstNote&&(null===(r=n.meta)||void 0===r||null===(o=r.searchResults)||void 0===o?void 0:o.noteIds.length)?(t.hasSelectedFirstNote=!0,e(s(s({},n),{},{meta:s(s({},n.meta),{},{nextNoteToOpen:null===(a=n.meta)||void 0===a?void 0:a.searchResults.noteIds[0]})}))):e(n)};switch(r.type){case"ADD_NOTE_TAG":var d=t.notes.get(r.noteId);return d?(d.tags.add(Object(a.a)(r.tagName)),d.modificationDate=Date.now()/1e3,p(r.noteId),u(E(r))):u(r);case"CREATE_NOTE_WITH_ID":case"IMPORT_NOTE_WITH_ID":case"REMOTE_NOTE_UPDATE":return t.notes.set(r.noteId,h(null!==(i=r.note)&&void 0!==i?i:{})),p(r.noteId),T(),u(r);case"DELETE_NOTE_FOREVER":case"REMOTE_NOTE_DELETE_FOREVER":return t.notes.delete(r.noteId),c=r.noteId,[n,l,f].forEach((function(e){var t=e.indexOf(c);t>-1&&e.splice(t,1)})),u(O(r.noteId,E(r)));case"EDIT_NOTE":var m=t.notes.get(r.noteId);return void 0!==r.changes.content&&(m.content=r.changes.content.toLocaleLowerCase(),m.casedContent=r.changes.content),void 0!==r.changes.tags&&(m.tags=new Set(r.changes.tags.map(a.a))),void 0!==r.changes.creationDate&&(m.creationDate=r.changes.creationDate),m.modificationDate=void 0!==r.changes.modificationDate?r.changes.modificationDate:Date.now()/1e3,void 0!==r.changes.deleted&&(m.isTrashed=!!r.changes.deleted),void 0!==r.changes.systemTags&&(m.isPinned=r.changes.systemTags.includes("pinned")),p(r.noteId),u(E(r));case"OPEN_TAG":return t.openedTag=Object(a.a)(r.tagName),u(E(r));case"PIN_NOTE":var y=t.notes.get(r.noteId);return y?(y.isPinned=r.shouldPin,y.modificationDate=Date.now()/1e3,p(r.noteId),u(E(r))):u(r);case"REMOVE_NOTE_TAG":var g=t.notes.get(r.noteId);return g?(g.tags.delete(Object(a.a)(r.tagName)),g.modificationDate=Date.now()/1e3,p(r.noteId),u(E(r))):u(r);case"RENAME_TAG":var b=Object(a.a)(r.oldTagName),w=Object(a.a)(r.newTagName);return t.openedTag===b&&(t.openedTag=w),t.notes.forEach((function(e,t){e.tags.has(b)&&(e.tags.delete(b),e.tags.add(w),e.modificationDate=Date.now()/1e3,p(t))})),u(E(r));case"RESTORE_NOTE":var S=t.notes.get(r.noteId);return S?(S.isTrashed=!1,S.modificationDate=Date.now()/1e3,p(r.noteId),u(O(r.noteId,E(r)))):u(r);case"SELECT_TRASH":return t.openedTag=null,t.showTrash=!0,u(E(r));case"SHOW_ALL_NOTES":return t.openedTag=null,t.showTrash=!1,u(E(r));case"SEARCH":return t.searchQuery=r.searchQuery,t.searchTerms=Object(o.a)(r.searchQuery),t.searchTags=v(r.searchQuery),u(E(r));case"setSortReversed":return t.sortReversed=r.sortReversed,u(E(r));case"setSortType":return t.sortType=r.sortType,u(E(r));case"TOGGLE_SORT_ORDER":return t.sortReversed=!t.sortReversed,u(E(r));case"TRASH_NOTE":var N=t.notes.get(r.noteId);return N?(N.isTrashed=!0,N.modificationDate=Date.now()/100,p(r.noteId),u(O(r.noteId,E(r)))):u(r);case"TRASH_TAG":var _=Object(a.a)(r.tagName);return t.notes.forEach((function(e,t){e.tags.has(_)&&(e.tags.delete(_),e.modificationDate=Date.now()/1e3,p(t))})),t.openedTag!==_?u(r):(t.openedTag=null,u(E(r)))}return u(r)}}}},729:function(e,t,n){"use strict";n.d(t,"b",(function(){return E}));var r=n(0),o=n.n(r),a=n(487),i=n(515),c=n(573);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,a,i=m(c);function c(){var e;f(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(h(e=i.call.apply(i,[this].concat(n))),"updateSearch",(function(t){var n=e.props,r=n.searchQuery,o=n.onSearch,a=r.trim().split(" ");a.splice(-1,1,t);var i=a.join(" ");o(i+=" ")})),e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.filteredTags,a=t.tags;return o.a.createElement(r.Fragment,null,n.length>0&&o.a.createElement("div",{className:"tag-suggestions"},o.a.createElement("div",{className:"note-list-header"},"Search by Tag"),o.a.createElement("ul",{className:"tag-suggestions-list"},n.map((function(t){return o.a.createElement("li",{key:t,id:t,className:"tag-suggestion-row",onClick:function(){return e.updateSearch("tag:".concat(a.get(t).name))}},o.a.createElement("div",{className:"tag-suggestion",title:a.get(t).name},"tag:",a.get(t).name))})))))}}])&&d(t.prototype,n),a&&d(t,a),c}(r.Component);g(b,"displayName","TagSuggestions");var E=function(e,t,n){var r=n.trim().split(" ").pop();if(!r)return[];var o,a=Object(c.a)(r),i=r.startsWith("tag:")&&r.length>4?Object(c.a)(r.slice(4)):null,u=function(e){return!(!i||e===i||!e.startsWith(i))||e.includes(a)},s=[],f=l(e.keys());try{for(f.s();!(o=f.n()).done;){var d=o.value;u(d)&&s.push(d)}}catch(e){f.e(e)}finally{f.f()}return s.sort((function(e,n){var r,o,i,c,u=e.startsWith(a);if(u!==n.startsWith(a))return u?-1:1;var l=null!==(r=null===(o=t.get(e))||void 0===o?void 0:o.size)&&void 0!==r?r:0,s=null!==(i=null===(c=t.get(n))||void 0===c?void 0:c.size)&&void 0!==i?i:0;return l!==s?s-l:e.localeCompare(n)})).slice(0,5)};t.a=Object(a.b)((function(e){var t=e.data,n=e.ui,r=n.searchQuery;return{filteredTags:n.tagSuggestions,searchQuery:r,tags:t.tags}}),(function(e){return{onSearch:function(t){e(Object(i.search)(t))}}}))(b)},803:function(e,t,n){},813:function(e,t){},815:function(e,t){}}]);