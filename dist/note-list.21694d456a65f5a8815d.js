(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1271:function(e,t,n){"use strict";n.r(t),n.d(t,"NoteList",(function(){return J}));var r=n(0),o=n.n(r),a=n(1177),i=n(37),c=n.n(i),l=n(487),s=n(500),u=function(){var e=Object(l.d)((function(e){return e.ui.hasLoadedNotes})),t=Object(l.d)((function(e){return e.ui.searchQuery})),n=Object(l.c)();return o.a.createElement("div",{className:"note-list-placeholder"},e?t.length?"No Results":"No Notes":"Loading Notes",e&&(t.length?o.a.createElement("button",{onClick:function(){return n(s.a.ui.createNote({content:t}))}},'Create a new note titled "',t,'"'):o.a.createElement("button",{onClick:function(){return n(s.a.ui.createNote())}},"Create a new note")))};function p(){return o.a.createElement("svg",{className:"icon-published-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},o.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),o.a.createElement("g",null,o.a.createElement("polygon",{points:"7.38 10.25 5.13 8.11 6.16 7.02 7.36 8.17 9.82 5.75 10.87 6.82 7.38 10.25"}),o.a.createElement("path",{d:"M13,.93H3a1.5,1.5,0,0,0-1.5,1.5V12.57A1.5,1.5,0,0,0,3,14.07H13a1.5,1.5,0,0,0,1.5-1.5V2.43A1.5,1.5,0,0,0,13,.93ZM3.5,12.07V4h9v8.07Z"})))}function f(){return o.a.createElement("svg",{className:"icon-pinned-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},o.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M4.41,10.17l-4-4,5.65-.52L8.65,3.1,7.24,1.69,8.66.27l7.07,7.07L14.31,8.76,12.89,7.33,10.33,9.91l-.52,5.66-4-4L3,14.41,1.59,13Zm3.8,1L8.4,9l3.07-3.1-1.4-1.41L7,7.6l-2.13.19Z"})))}function h(){return o.a.createElement("svg",{className:"icon-sync-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},o.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M14,2v5h-0.09h-2.05H9l1.82-1.82C10.1,4.46,9.11,4,8,4C6.14,4,4.59,5.28,4.14,7H2.09C2.57,4.17,5.03,2,8,2 c1.65,0,3.14,0.69,4.22,1.78L14,2z M8,12c-1.11,0-2.1-0.46-2.82-1.18L7,9H4.14H2.09H2v5l1.78-1.78C4.86,13.31,6.35,14,8,14 c2.97,0,5.43-2.17,5.91-5h-2.05C11.41,10.72,9.86,12,8,12z"})))}var d=n(33),m=n(892),y=n.n(m),g=n(549),b=function(e,t){return e.length>0&&t.length>0?e.reduce((function(e,t){var n=t.filter,r=t.replacer,o="string"==typeof n&&Object(g.b)(n),a=o&&o.length>0?new RegExp(Object(d.escapeRegExp)(o),"gi"):n;return y()(e,a,r)}),t).map((function(e,t){return e&&"string"!=typeof e?o.a.cloneElement(e,{key:t}):e})):t},v=function(e){return{filter:e,replacer:function(e){if(e.length)return o.a.createElement("span",{className:"search-match"},e)}}},w=n(572),E=n(590),N=n(538);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,e);var t,n,r,a=x(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),D(C(t=a.call(this,e)),"createdAt",void 0),D(C(t),"updateScheduled",void 0),t.createdAt=Date.now(),t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t,n,r=this;(null===(t=e.note)||void 0===t?void 0:t.content)!==(null===(n=this.props.note)||void 0===n?void 0:n.content)&&this.props.invalidateHeight(),this.props.lastUpdated<1e3&&!this.updateScheduled&&(this.updateScheduled=setTimeout((function(){return r.forceUpdate()}),1e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.updateScheduled)}},{key:"render",value:function(){var e=this.props,t=e.displayMode,n=e.hasPendingChanges,r=e.isOffline,a=e.isOpened,i=e.lastUpdated,l=e.noteId,s=e.note,u=e.openNote,d=e.pinNote,m=e.searchQuery,y=e.style;if(!s)return o.a.createElement("div",null,"Couldn't find note");var N=Object(w.c)(s,m),O=N.title,j=N.preview,S=s.systemTags.includes("pinned"),x=!!s.publishURL,k=i-this.createdAt>1e3&&Date.now()-i<1200,C=c()("note-list-item",{"note-list-item-selected":a,"note-list-item-pinned":S,"note-recently-updated":k,"published-note":x}),P=c()("note-list-item-pinner",{"note-list-item-pinned":S}),D=Object(g.a)(m).map(v);return o.a.createElement("div",{style:y,className:C},o.a.createElement("div",{className:"note-list-item-status"},o.a.createElement("div",{className:P,tabIndex:0,onClick:function(){return d(l,!S)}},o.a.createElement(f,null))),o.a.createElement("div",{className:"note-list-item-text theme-color-border",tabIndex:0,onClick:function(){return u(l)}},o.a.createElement("div",{className:"note-list-item-title"},o.a.createElement("span",null,b(D,Object(E.a)(O)))),"expanded"===t&&j.length>0&&o.a.createElement("div",{className:"note-list-item-excerpt"},Object(E.a)(j).split("\n").map((function(e,t){return o.a.createElement(o.a.Fragment,{key:t},t>0&&o.a.createElement("br",null),b(D,e.slice(0,200)))}))),"comfy"===t&&j.length>0&&o.a.createElement("div",{className:"note-list-item-excerpt"},b(D,Object(E.a)(j).slice(0,200)))),o.a.createElement("div",{className:"note-list-item-status-right theme-color-border"},n&&o.a.createElement("span",{className:c()("note-list-item-pending-changes",{"is-offline":r})},o.a.createElement(h,null)),x&&o.a.createElement("span",{className:"note-list-item-published-icon"},o.a.createElement(p,null))))}}])&&j(t.prototype,n),r&&j(t,r),i}(r.Component),L={openNote:s.a.ui.openNote,pinNote:s.a.data.pinNote},I=Object(l.b)((function(e,t){var n,r=t.noteId;return{displayMode:e.settings.noteDisplay,hasPendingChanges:N.c(e,r),isOffline:"offline"===e.simperium.connectionStatus,isOpened:e.ui.openedNote===r,lastUpdated:null!==(n=e.simperium.lastRemoteUpdate.get(r))&&void 0!==n?n:-1/0,note:e.data.notes.get(r),searchQuery:e.ui.searchQuery}}),L)(R),T=n(729);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return W(this,n)}}function W(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(s,e);var t,n,i,l=U(s);function s(){var e;_(this,s);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return V(Q(e=l.call.apply(l,[this].concat(n))),"state",{heightCache:new a.c({defaultHeight:135,fixedWidth:!0,keyMapper:function(t){var n=e.props,r=n.filteredNotes,o=n.searchQuery,a=n.tagResultsFound;return 0===a&&0===r.length?"no-notes":0===o.length||0===a?r[t]:0===t?"tag-suggestions":1===t?"notes-header":r[t-2]}}),lastNoteDisplay:null,windowWidth:null}),V(Q(e),"list",Object(r.createRef)()),V(Q(e),"handleShortcut",(function(t){if(e.props.keyboardShortcuts){var n=t.ctrlKey,r=t.metaKey,o=t.shiftKey,a=t.key.toLowerCase(),i=e.props,c=i.isSmallScreen,l=i.showNoteList,s=n||r;return s&&o&&"k"===a?(e.props.selectNoteAbove(),t.stopPropagation(),t.preventDefault(),!1):s&&o&&"j"===a?(e.props.selectNoteBelow(),t.stopPropagation(),t.preventDefault(),!1):c&&s&&o&&"l"===a?(e.props.toggleNoteList(),t.stopPropagation(),t.preventDefault(),!1):!c||!l||"Enter"!==a||(e.props.openNote(),t.stopPropagation(),t.preventDefault(),!1)}})),V(Q(e),"toggleShortcuts",(function(t){t?window.addEventListener("keydown",e.handleShortcut,!0):window.removeEventListener("keydown",e.handleShortcut,!0)})),e}return t=s,(n=[{key:"componentDidMount",value:function(){this.toggleShortcuts(!0)}},{key:"componentWillUnmount",value:function(){this.toggleShortcuts(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.filteredNotes,i=t.noteDisplay,l=t.onEmptyTrash,s=t.openedNote,p=t.searchQuery,f=t.showTrash,h=t.tagResultsFound,d=this.state.heightCache,m=function(e,t,n){return 0===t.length||0===n?e:["tag-suggestions","notes-header"].concat(F(e.length>0?e:["no-notes"]))}(n,p,h),y=m.findIndex((function(e){return e===s})),g=function(e,t){var n=t.heightCache;return function(t){var r=t.index,i=t.key,c=t.parent,l=t.style,s=e[r];return"no-notes"===s?o.a.createElement(a.b,{cache:n,columnIndex:0,key:"no-notes",parent:c,rowIndex:r},o.a.createElement("div",{className:"note-list is-empty",style:K(K({},l),{},{height:200})},o.a.createElement("span",{className:"note-list-placeholder"},"No Notes"))):"tag-suggestions"===s||"notes-header"===s?"tag-suggestions"===s?o.a.createElement(a.b,{cache:n,columnIndex:0,key:"tag-suggestions",parent:c,rowIndex:r},o.a.createElement(T.a,{style:K({},l)})):o.a.createElement(a.b,{cache:n,columnIndex:0,key:"notes-header",parent:c,rowIndex:r},o.a.createElement("div",{className:"note-list-header",style:K({},l)},"Notes")):o.a.createElement(a.b,{cache:n,columnIndex:0,key:i,parent:c,rowIndex:r},o.a.createElement(I,{invalidateHeight:function(){return n.clear(r,0)},noteId:s,style:l}))}}(m,{heightCache:d}),b=0===m.length,v=o.a.createElement("div",{className:"note-list-empty-trash theme-color-border"},o.a.createElement("button",{type:"button",className:"button button-borderless button-danger",onClick:l},"Empty Trash"));return o.a.createElement("div",{className:c()("note-list",{"is-empty":b})},b?o.a.createElement(u,null):o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"note-list-items ".concat(i)},o.a.createElement(a.a,null,(function(t){var n=t.height,r=t.width;return o.a.createElement(a.d,{ref:e.list,estimatedRowSize:126,height:n,noteDisplay:i,notes:m,rowCount:m.length,rowHeight:d.rowHeight,rowRenderer:g,scrollToIndex:y,width:r})}))),f&&v))}}])&&H(t.prototype,n),i&&H(t,i),s}(r.Component);V(J,"displayName","NoteList"),V(J,"getDerivedStateFromProps",(function(e,t){return t.heightCache.clear(0),t.heightCache.clear(1),t.heightCache.clear(2),e.noteDisplay!==t.lastNoteDisplay||e.windowWidth!==t.windowWidth?(t.heightCache.clearAll(),{lastNoteDisplay:e.noteDisplay,windowWidth:e.windowWidth}):null}));var $={onEmptyTrash:s.a.ui.emptyTrash,openNote:s.a.ui.openNote,selectNoteAbove:s.a.ui.selectNoteAbove,selectNoteBelow:s.a.ui.selectNoteBelow,toggleNoteList:s.a.ui.toggleNoteList};t.default=Object(l.b)((function(e){return{isSmallScreen:N.b(e),keyboardShortcuts:e.settings.keyboardShortcuts,noteDisplay:e.settings.noteDisplay,filteredNotes:e.ui.filteredNotes,openedNote:e.ui.openedNote,openedTag:e.ui.openedTag,searchQuery:e.ui.searchQuery,showNoteList:e.ui.showNoteList,showTrash:e.ui.showTrash,tagResultsFound:e.ui.tagSuggestions.length,windowWidth:e.browser.windowWidth}}),$)(J)}}]);